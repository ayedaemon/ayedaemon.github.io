<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Intro to Re: C : part-2 | Connected</title>
<meta name=keywords content="RE,linux,C programming"><meta name=description content="How to reverse engineer a basic C program"><meta name=author content="ayedaemon"><link rel=canonical href=https://ayedaemon.github.io/post/2023/03/intro-to-re-part-2/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ayedaemon.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ayedaemon.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ayedaemon.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ayedaemon.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ayedaemon.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Intro to Re: C : part-2"><meta property="og:description" content="How to reverse engineer a basic C program"><meta property="og:type" content="article"><meta property="og:url" content="https://ayedaemon.github.io/post/2023/03/intro-to-re-part-2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-03-19T22:07:39+05:30"><meta property="article:modified_time" content="2023-11-26T23:45:19+05:30"><meta property="og:site_name" content="Connected"><meta property="og:see_also" content="https://ayedaemon.github.io/post/2023/05/intro-to-re-part-4/"><meta property="og:see_also" content="https://ayedaemon.github.io/post/2023/04/intro-to-re-simple-calculator/"><meta property="og:see_also" content="https://ayedaemon.github.io/post/2023/04/intro-to-re-part-3/"><meta property="og:see_also" content="https://ayedaemon.github.io/post/2022/09/intro-to-re/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Intro to Re: C : part-2"><meta name=twitter:description content="How to reverse engineer a basic C program"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ayedaemon.github.io/post/"},{"@type":"ListItem","position":2,"name":"Intro to Re: C : part-2","item":"https://ayedaemon.github.io/post/2023/03/intro-to-re-part-2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Intro to Re: C : part-2","name":"Intro to Re: C : part-2","description":"How to reverse engineer a basic C program","keywords":["RE","linux","C programming"],"articleBody":"Reverese engineering is a powerful tool for any software developer. However, as with any tool, it is only as good as the person using it. Understanding reverse engineering and how to use it is essential for both novices and seasoned developers.\nAccording to wikipedia,\nReverse engineering, also called back engineering, is the process by which a man-made object is deconstructed to reveal its designs, architecture, or to extract knowledge from the object; similar to scientific research, the only difference being that scientific research is about a natural phenomenon.\nBecause there will be a lot of new things, I’m attempting to keep this article more practical and experimental…I encourage you to follow along and experiment with your own examples as well.\nThe following is a very simple C program that starts the main() function and exits by returning a value 0.\nint main() { return 0; } This source code will be compiled to create an executable binary file. When we disassemble the compiled binary, we get something like this…\n(Note: There are many disassemblers 1 you can use. Nearly all the disassembled instructions in this blog were produced with godbolt)\nmain: push rbp mov rbp, rsp mov eax, 0 pop rbp ret In this example, function prologue and epilogue are the first two and last two instructions, respectively. These are used to build a frame for a function. This frame contains all of the local variables used or defined in this function.\nWhenever a function is created, a new frame is created, all the local variables are stored in respective memory blocks inside this frame and finally the frame is discarded when the function returns.\nWe’ll go into more detail about this later, but for now, just remember that there are prologue and epilogue instructions that mark the beginning and end of a function.\nWith this out of the picture, the instruction at line 4 appears to be in charge of returning 0 to the caller function (whoever called main()).\nThe idea is to use the eax register as a storage area for return values. When a function returns something, it simply stores the value in the eax/rax register so that the caller function can read it later if necessary.\nNow we know some background theory, let’s try to change the return value and see how our assembly instructions reflect the change.\nint main(){ return 6; } The assembly instructions for the above code are nearly identical to the previous one, with the exception of the return value at line 4. Now eax register stores the value 6 instead of 0.\nmain: push rbp mov rbp, rsp mov eax, 6 pop rbp ret If you are familiar with basic C programming, you know that we can avoid returning value by changing the return type of the function main() from int to void.\nvoid main() {} No return statements here! So we can safely assume that the disassembly for this function should consist only of a prologue and an epilogue, with no mov eax 0 kind of instructions.\nWhy?? No return statements in the source code, so no need to store anything in eax register. Save some CPU cycles. Makes sense, right? Let’s check!!\nmain: push rbp mov rbp, rsp nop pop rbp ret The prologue and epilogue can be seen in the above disassembly, along with a new instruction nop that does nothing. A nop statement in C is a null statement that can be a semicolon (;), an empty block ({}), or any other equivalent statement.\nIf you’re a Pythonista, you’re already familiar with the pass statement, which has no effect when executed. This serves as a nop in python language.\nIn the disassembly, we now know what the prologue, epilogue, and return statement look like. Let’s see what variables look like when disassembled.\nEverything in the following code is identical to the previous example; the only statement added here is an int variable definition.\nvoid main(){ int a = 1; } We have already established that all the local variables for a function are created inside the function frame (which starts with a prologue and ends with an epilogue). With that in mind, let’s take a look at the disassembly for this source code.\nmain: push rbp mov rbp, rsp mov DWORD PTR [rbp-4], 1 nop pop rbp ret A new instruction detected - mov DWORD PTR [rbp-4], 1. This is storing value 1 at some location pointed by rbp-4. To gain a better understanding of how that works, we’ll have to take a detour so that we can debug the binary and see the registers and memory in action.\nI’ll start gdb with the compiled version of the above source code, and then disassemble the main function.\n\u003e\u003e\u003e disas main Dump of assembler code for function main: 0x0000555555555119 \u003c+0\u003e: push rbp 0x000055555555511a \u003c+1\u003e: mov rbp,rsp =\u003e 0x000055555555511d \u003c+4\u003e: mov DWORD PTR [rbp-0x4],0x1 0x0000555555555124 \u003c+11\u003e: nop 0x0000555555555125 \u003c+12\u003e: pop rbp 0x0000555555555126 \u003c+13\u003e: ret End of assembler dump. In this scenario, I’m at the mov DWORD PTR [rbp-0x4],0x1 instruction. That means, rip register is pointing to this instruction, which means this will be the next instruction executed by the CPU. We can also confirm this by checking the value stored in rip register.\n\u003e\u003e\u003e p/x $rip $1 = 0x55555555511d See, told ya!\nNow, let’s print the value from rbp register to figure out where the 0x1 will be stored eventually.\n\u003e\u003e\u003e p/x $rbp $2 = 0x7fffffffdbd0 \u003e\u003e\u003e p/x $rbp-4 $3 = 0x7fffffffdbcc \u003e\u003e\u003e p/x (int *)($rbp-4) $4 = 0x7fffffffdbcc \u003e\u003e\u003e p/x *(int *)($rbp-4) $5 = 0x7fff The last value is the current value at the location pointed by rbp-4 memory location. Consider the below mindmap diagram to get a clear picture.\nR B ┌ │ │ │ └ P ─ ─ ─ ─ r ─ 0 ─ e ─ x ─ g ─ 7 ─ i ─ f ─ s ─ f ─ t ─ f ─ e ─ f ─ r ─ f ─ ─ f ─ ─ f ─ ─ d ─ ─ b ─ ─ d ─ ─ 0 ─ ─ ─ ─ ─ ┐ │ ├ │ ┘ ─ ─ ─ ─ ─ ─ ┌ │ │ │ │ │ │ │ ┘ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ► 0 0 x x 7 7 f f f f f f f f f f f f f f d d b b d c 0 c ┌ │ │ │ │ │ │ │ │ ├ │ ├ │ ├ │ ├ │ ├ │ │ ├ │ │ │ │ │ │ │ │ │ │ │ │ └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ 0 ─ ─ M ─ ─ ─ ─ ─ ─ x ─ ─ E ─ ─ ─ ─ ─ ─ 7 ─ ─ M ─ ─ ─ ─ ─ ─ f ─ ─ O ─ ─ ─ ─ ─ ─ f ─ ─ R ─ ─ ─ ─ ─ ─ f ─ ─ Y ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐ │ │ │ │ │ │ │ │ ┤ │ ┤ │ ┤ │ ┤ │ ┤ │ │ ┤ │ │ │ │ │ │ │ │ │ │ │ │ ┘ │ │ │ │ │ │ │ │ ▼ ( ( r r b b p p ) - 4 ) The rbp register holds a memory location, you subtract 4 from the rbp to make enough space for a int type data and then store the value at that location.\nAfter executing the instruction, we’ll get 0x1 in this location.\n\u003e\u003e\u003e si \u003e\u003e\u003e disas main Dump of assembler code for function main: 0x0000555555555119 \u003c+0\u003e: push rbp 0x000055555555511a \u003c+1\u003e: mov rbp,rsp 0x000055555555511d \u003c+4\u003e: mov DWORD PTR [rbp-0x4],0x1 =\u003e 0x0000555555555124 \u003c+11\u003e: nop 0x0000555555555125 \u003c+12\u003e: pop rbp 0x0000555555555126 \u003c+13\u003e: ret End of assembler dump. \u003e\u003e\u003e p/x *(int *)($rbp-4) $7 = 0x1 R B ┌ │ │ │ └ P ─ ─ ─ ─ r ─ 0 ─ e ─ x ─ g ─ 7 ─ i ─ f ─ s ─ f ─ t ─ f ─ e ─ f ─ r ─ f ─ ─ f ─ ─ f ─ ─ d ─ ─ b ─ ─ d ─ ─ 0 ─ ─ ─ ─ ─ ┐ │ ├ │ ┘ ─ ─ ─ ─ ─ ─ ┌ │ │ │ │ │ │ │ ┘ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ► 0 0 x x 7 7 f f f f f f f f f f f f f f d d b b d c 0 c ┌ │ │ │ │ │ │ │ │ ├ │ ├ │ ├ │ ├ │ ├ │ │ ├ │ │ │ │ │ │ │ │ │ │ │ │ └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ 0 ─ ─ M ─ ─ ─ ─ ─ ─ x ─ ─ E ─ ─ ─ ─ ─ ─ 1 ─ ─ M ─ ─ ─ ─ ─ ─ ─ ─ O ─ ─ ─ ─ ─ ─ ─ ─ R ─ ─ ─ ─ ─ ─ ─ ─ Y ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐ │ │ │ │ │ │ │ │ ┤ │ ┤ │ ┤ │ ┤ │ ┤ │ │ ┤ │ │ │ │ │ │ │ │ │ │ │ │ ┘ │ │ │ │ │ │ │ │ ▼ ( ( r r b b p p ) - 4 ) This should give you a little idea of how the references work and where does the 0x1 is actually stored.\nWith that out of our plate, let’s get back to the original instruction in question - mov DWORD PTR [rbp-4], 1. This instruction surely stores the value 0x1 in the location pointed by rbp - 4 memory location.\nThen there is the same old nop and epilogue. Nothing new here. Let’s add more variables to the function.\nvoid main() { int a = 1, b=2, c=3, d=4; int e = 5; } Below is the disassembly for this\nmain: push rbp mov rbp, rsp mov DWORD PTR [rbp-4], 1 mov DWORD PTR [rbp-8], 2 mov DWORD PTR [rbp-12], 3 mov DWORD PTR [rbp-16], 4 mov DWORD PTR [rbp-20], 5 nop pop rbp ret Each variable is created in sequence and have a space of 4 bytes to save an int type data in it. Int data types have a size of 4 bytes, so this makes sense.\nAnother commonly used data type is char, which requires a smaller size than int, 1 byte in total.\nvoid main(){ char a = 1, b=2, c=3, d=4; char e = 5; } Yes, the above program is completely correct from the standpoint of a compiler. When storing data in char types, we don’t always need single quotes.\nAnyway, the disassembly for this is as follows:-\nmain: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 1 mov BYTE PTR [rbp-2], 2 mov BYTE PTR [rbp-3], 3 mov BYTE PTR [rbp-4], 4 mov BYTE PTR [rbp-5], 5 nop pop rbp ret There is now a noticeable difference between this disassembly and the previous one. The DWORD has been changed to BYTE in this case, which means that less memory is required to store this data, as evidenced by the memory locations used for storage - rbp-1, rbp-2, and so on - each of which has only 1 byte of storage.\nFun thing, with the help of some computer maths, we can find out that the highest number that can be stored in 1 byte storage location is 127. So if we store any number bigger than this, it’ll start shifting to the negative range and then loop back.\nvoid main(){ char a = 127; char b = 128; char c = 129; char d = 130; } disassembly for this code:-\nmain: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 127 mov BYTE PTR [rbp-2], -128 mov BYTE PTR [rbp-3], -127 mov BYTE PTR [rbp-4], -126 nop pop rbp ret Good, now we also know how int and char looks like in their disassembly output. Let’s mix things up a bit to level up and learn something new.\nvoid main(){ char a = 127; char b = 128; char c = 129; char d = 130; int e = 131; } 4 char and then 1 int.\nrbp-1 for a. rbp-2 for b. rbp-3 for c. rbp-4 for d. rbp-8 for e. Because int takes 4 bytes (This can depend on the OS, architecture and compiler you are using). Let’s check the disassembly to see if we got this right or not.\nmain: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 127 mov BYTE PTR [rbp-2], -128 mov BYTE PTR [rbp-3], -127 mov BYTE PTR [rbp-4], -126 mov DWORD PTR [rbp-8], 131 nop pop rbp ret Woohooo!!\nThough there is one thing I want you to notice… The int value did not follow the same pattern as char values because char is smaller in size and cannot store a very large value, whereas int is comparatively larger and can store the assigned value without any storage issues. As a result, the int value remained unchanged from the source code, while the char values became negative.\nNow, let’s change the order of the variables and see how it gets interesting.\nvoid main(){ char a = 127; char b = 128; int e = 131; char c = 129; char d = 130; } disassembly for this code:-\nmain: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 127 mov BYTE PTR [rbp-2], -128 mov DWORD PTR [rbp-8], 131 mov BYTE PTR [rbp-9], -127 mov BYTE PTR [rbp-10], -126 nop pop rbp ret Well, you can see the size needed for each variable has changed. It’s time to be aware of a concept called Data structure alignment.\nAccording to wikipedia,\nThe CPU in modern computer hardware performs reads and writes to memory most efficiently when the data is naturally aligned, which generally means that the data’s memory address is a multiple of the data size. For instance, in a 32-bit architecture, the data may be aligned if the data is stored in four consecutive bytes and the first byte lies on a 4-byte boundary.\nRead this article 2 to gain better understanding of data alignment and why is it even a concerning thing for us.\nFor now, just know that usually 64-bit CPUs have a native 4-byte load. That means, it can pick up 4 bytes in a single turn and use them for something.\nLet’s visualize the memory layout for the variables in above code.\n┌ │ │ │ ├ │ │ │ ├ │ │ │ ├ │ │ ─ ─ ─ ─ 1 ─ 1 ─ ─ - ─ ◄ ─ 2 ─ ─ 1 ─ ─ ◄ ─ 7 ─ ─ 2 ─ ─ ─ ─ ─ ─ 7 ─ ─ ─ ┬ │ │ │ ┴ ┬ │ │ │ ┼ │ │ ─ 4 ─ ─ ─ ─ ─ ─ ─ ─ - ─ ─ - ─ l ─ b ─ 2 ─ 1 ─ ─ 1 ─ o ─ y ─ ─ 2 ─ ─ 2 ─ a ─ t ─ ─ 8 ─ 1 ─ 6 ─ d ─ e ─ ┬ │ │ │ ┴ 3 ┬ │ │ │ ┼ │ │ s ─ s ─ ─ ─ 1 ─ ─ ─ ─ ─ ─ ─ ─ l ─ ─ 3 ─ ─ ─ ─ i ─ ─ ─ ─ ─ ─ k ─ ─ ─ ─ ─ ─ e ─ ─ ┬ │ │ │ ┴ ┬ │ │ │ ┼ │ │ ─ ► ─ ─ ─ ─ t ─ ─ ─ ─ ─ h ─ 4 ─ ─ ─ ─ i ─ ─ ─ ─ ─ s ─ ─ ─ ─ ─ ─ ┐ │ │ │ ┤ │ │ │ ┤ │ │ │ ┤ │ │ │ │ ┘ The above diagram of memory is aligned in a 4 byte load. The first 2 variables are a BYTE type so the values are places in the first 2 blocks of the first row. Next variable is an INT type, which is equivalent to 4 bytes. But there are no 4 bytes available in the first row, so in order to keep the atomicity, this variable was stored in the next row. (WHY atomicity??)\nSo does it mean that we have that 2 bytes space just lying there?? - YES! you can use it if you want. Take a look at the below source code.\nvoid main(){ char a = 127; char b = 128; char x = 111; char y = 112; int e = 131; char c = 129; char d = 130; } main: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 127 mov BYTE PTR [rbp-2], -128 mov BYTE PTR [rbp-3], 111 mov BYTE PTR [rbp-4], 112 mov DWORD PTR [rbp-8], 131 mov BYTE PTR [rbp-9], -127 mov BYTE PTR [rbp-10], -126 nop pop rbp ret No change in the layout… variable x and y will fill up the 2 Bytes space that were just lying there to be used.\nBut if we add 1 more variable z, then the whole thing moves.\nvoid main(){ char a = 127; char b = 128; char x = 111; char y = 112; char Z = 123; int e = 131; char c = 129; char d = 130; } main: push rbp mov rbp, rsp mov BYTE PTR [rbp-1], 127 mov BYTE PTR [rbp-2], -128 mov BYTE PTR [rbp-3], 111 mov BYTE PTR [rbp-4], 112 mov BYTE PTR [rbp-5], 123 mov DWORD PTR [rbp-12], 131 mov BYTE PTR [rbp-13], -127 mov BYTE PTR [rbp-14], -126 nop pop rbp ret If you are still visualizing the way I displayed above, now we have 3 bytes space in the row 2. This space is added by the compiler and is termed as padding. We can not always avoid padding, but a good programmer can arrange the variables in a way to minimize this.\nThat was a long detour, but definetily worth it. I’ll cover more examples in later parts of this series. Till then, ciao!!\nhttps://en.wikipedia.org/wiki/Disassembler#Examples_of_disassemblers ↩︎\nhttps://developer.ibm.com/articles/pa-dalign/ ↩︎\n","wordCount":"3306","inLanguage":"en","datePublished":"2023-03-19T22:07:39+05:30","dateModified":"2023-11-26T23:45:19+05:30","author":[{"@type":"Person","name":"ayedaemon"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://ayedaemon.github.io/post/2023/03/intro-to-re-part-2/"},"publisher":{"@type":"Organization","name":"Connected","logo":{"@type":"ImageObject","url":"https://ayedaemon.github.io/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://ayedaemon.github.io/ accesskey=h title="Connected (Alt + H)">Connected</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://ayedaemon.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://ayedaemon.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://ayedaemon.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ayedaemon.github.io/series/ title=Series><span>Series</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ayedaemon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ayedaemon.github.io/post/>Posts</a></div><h1 class=post-title>Intro to Re: C : part-2</h1><div class=post-description>How to reverse engineer a basic C program</div><div class=post-meta><span title='2023-03-19 22:07:39 +0530 +0530'>March 19, 2023</span>&nbsp;·&nbsp;16 min&nbsp;·&nbsp;3306 words&nbsp;·&nbsp;ayedaemon&nbsp;|&nbsp;<a href=https://github.com/ayedaemon/ayedaemon.github.io/tree/main/content/post/2023/03/Intro-to-RE-part-2.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Reverese engineering is a powerful tool for any software developer. However, as with any tool, it is only as good as the person using it. Understanding reverse engineering and how to use it is essential for both novices and seasoned developers.</p><p>According to wikipedia,</p><blockquote><p>Reverse engineering, also called back engineering, is the process by which a man-made object is deconstructed to reveal its designs, architecture, or to extract knowledge from the object; similar to scientific research, the only difference being that scientific research is about a natural phenomenon.</p></blockquote><p>Because there will be a lot of new things, I&rsquo;m attempting to keep this article more practical and experimental&mldr;I encourage you to follow along and experiment with your own examples as well.</p><p><img loading=lazy src=https://media.giphy.com/media/109fP7pua6Osgw/giphy.gif#center alt></p><p>The following is a very simple C program that starts the <code>main()</code> function and exits by returning a value <code>0</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This source code will be compiled to create an executable binary file. When we disassemble the compiled binary, we get something like this&mldr;</p><p>(Note: There are <a href=https://en.wikipedia.org/wiki/Disassembler#Examples_of_disassemblers>many disassemblers</a> <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> you can use. Nearly all the disassembled instructions in this blog were produced with <a href=https://godbolt.org/>godbolt</a>)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>eax</span><span class=p>,</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>In this example, function <code>prologue</code> and <code>epilogue</code> are the first two and last two instructions, respectively. These are used to build a frame for a function. This frame contains all of the local variables used or defined in this function.</p><p>Whenever a function is created, a new frame is created, all the local variables are stored in respective memory blocks inside this frame and finally the frame is discarded when the function returns.</p><p>We&rsquo;ll go into more detail about this later, but for now, just remember that there are <code>prologue</code> and <code>epilogue</code> instructions that mark the beginning and end of a function.</p><p>With this out of the picture, the instruction at line 4 appears to be in charge of returning <code>0</code> to the caller function (whoever called <code>main()</code>).</p><p>The idea is to use the <code>eax</code> register as a storage area for return values. When a function returns something, it simply stores the value in the <code>eax</code>/<code>rax</code> register so that the caller function can read it later if necessary.</p><p>Now we know some background theory, let&rsquo;s try to change the return value and see how our assembly instructions reflect the change.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The assembly instructions for the above code are nearly identical to the previous one, with the exception of the return value at <code>line 4</code>. Now eax register stores the value <code>6</code> instead of <code>0</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>eax</span><span class=p>,</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>If you are familiar with basic C programming, you know that we can avoid returning value by changing the return type of the function <code>main()</code> from <code>int</code> to <code>void</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{}</span>
</span></span></code></pre></div><p>No return statements here! So we can safely assume that the disassembly for this function should consist only of a <code>prologue</code> and an <code>epilogue</code>, with <strong>no</strong> <code>mov eax 0</code> kind of instructions.</p><p>Why?? No <code>return</code> statements in the source code, so no need to store anything in <code>eax</code> register. Save some CPU cycles. Makes sense, right? Let&rsquo;s check!!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>The <code>prologue</code> and <code>epilogue</code> can be seen in the above disassembly, along with a new instruction <code>nop</code> that does nothing. A <code>nop</code> statement in C is a null statement that can be a semicolon (<code>;</code>), an empty block (<code>{}</code>), or any other equivalent statement.</p><p>If you&rsquo;re a Pythonista, you&rsquo;re already familiar with the <code>pass</code> statement, which has no effect when executed. This serves as a <code>nop</code> in python language.</p><p>In the disassembly, we now know what the <code>prologue</code>, <code>epilogue</code>, and <code>return</code> statement look like. Let’s see what variables look like when disassembled.</p><p>Everything in the following code is identical to the previous example; the only statement added here is an <code>int</code> variable definition.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>We have already established that all the local variables for a function are created inside the function frame (which starts with a <code>prologue</code> and ends with an <code>epilogue</code>). With that in mind, let&rsquo;s take a look at the disassembly for this source code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>A new instruction detected - <code>mov DWORD PTR [rbp-4], 1</code>. This is storing value <code>1</code> at some location pointed by <code>rbp-4</code>. To gain a better understanding of how that works, we&rsquo;ll have to take a detour so that we can debug the binary and see the registers and memory in action.</p><p>I&rsquo;ll start <code>gdb</code> with the compiled version of the above source code, and then disassemble the main function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt;&gt;&gt; disas main
</span></span><span class=line><span class=cl>Dump of assembler code for function main:
</span></span><span class=line><span class=cl>   0x0000555555555119 &lt;+0&gt;:     push   rbp
</span></span><span class=line><span class=cl>   0x000055555555511a &lt;+1&gt;:     mov    rbp,rsp
</span></span><span class=line><span class=cl>=&gt; 0x000055555555511d &lt;+4&gt;:     mov    DWORD PTR [rbp-0x4],0x1
</span></span><span class=line><span class=cl>   0x0000555555555124 &lt;+11&gt;:    nop
</span></span><span class=line><span class=cl>   0x0000555555555125 &lt;+12&gt;:    pop    rbp
</span></span><span class=line><span class=cl>   0x0000555555555126 &lt;+13&gt;:    ret
</span></span><span class=line><span class=cl>End of assembler dump.
</span></span></code></pre></div><p>In this scenario, I&rsquo;m at the <code>mov DWORD PTR [rbp-0x4],0x1</code> instruction. That means, <code>rip</code> register is pointing to this instruction, which means this will be the next instruction executed by the CPU. We can also confirm this by checking the value stored in <code>rip</code> register.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt;&gt;&gt; p/x $rip
</span></span><span class=line><span class=cl>$1 = 0x55555555511d
</span></span></code></pre></div><p>See, told ya!</p><p><img loading=lazy src=https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNGZjOTIyNThjNDdmOTFmZDcyMjYxZDE3ZjIxYmU3MmZiNmMxYTBiNCZjdD1n/DT3gYifPXBt5voafS1/giphy.gif#center alt></p><p>Now, let&rsquo;s print the value from <code>rbp</code> register to figure out where the <code>0x1</code> will be stored eventually.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt;&gt;&gt; p/x $rbp
</span></span><span class=line><span class=cl>$2 = 0x7fffffffdbd0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; p/x $rbp-4
</span></span><span class=line><span class=cl>$3 = 0x7fffffffdbcc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; p/x (int *)($rbp-4)
</span></span><span class=line><span class=cl>$4 = 0x7fffffffdbcc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; p/x *(int *)($rbp-4)
</span></span><span class=line><span class=cl>$5 = 0x7fff
</span></span></code></pre></div><p>The last value is the current value at the location pointed by <code>rbp-4</code> memory location. Consider the below mindmap diagram to get a clear picture.</p><div class="goat svg-container"><svg xmlns="http://www.w3.org/2000/svg" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 904 681"><g transform="translate(8,16)"><text text-anchor="middle" x="48" y="372" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="56" y="372" fill="currentcolor" style="font-size:1em">B</text><text text-anchor="middle" x="56" y="388" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="56" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="452" fill="currentcolor" style="font-size:1em">└</text><text text-anchor="middle" x="64" y="372" fill="currentcolor" style="font-size:1em">P</text><text text-anchor="middle" x="64" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="80" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="420" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="88" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="420" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="88" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="372" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="96" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="420" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="96" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="104" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="104" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="112" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="112" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="120" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="128" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="128" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="136" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="136" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="144" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="152" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="420" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="160" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="420" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="168" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="420" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="176" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="420" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="184" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="388" fill="currentcolor" style="font-size:1em">┐</text><text text-anchor="middle" x="208" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="208" y="420" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="208" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="208" y="452" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="216" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="224" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="232" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="240" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="248" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="256" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="264" y="292" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="264" y="308" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="340" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="372" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="420" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="272" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="280" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="288" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="296" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="304" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="312" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="320" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="328" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="336" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="344" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="352" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="360" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="368" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="376" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="384" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="392" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="400" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="408" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="416" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="424" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="432" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="440" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="448" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="456" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="464" y="292" fill="currentcolor" style="font-size:1em">►</text><text text-anchor="middle" x="480" y="292" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="480" y="436" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="488" y="292" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="488" y="436" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="496" y="292" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="496" y="436" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="504" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="504" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="512" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="512" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="520" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="520" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="528" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="528" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="536" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="536" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="544" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="544" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="552" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="552" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="560" y="292" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="560" y="436" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="568" y="292" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="568" y="436" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="576" y="292" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="576" y="436" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="584" y="292" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="584" y="436" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="608" y="132" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="608" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="196" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="260" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="276" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="308" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="340" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="372" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="404" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="452" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="468" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="484" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="500" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="516" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="532" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="548" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="564" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="580" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="596" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="612" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="628" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="644" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="660" fill="currentcolor" style="font-size:1em">└</text><text text-anchor="middle" x="616" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="436" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="648" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="84" fill="currentcolor" style="font-size:1em">M</text><text text-anchor="middle" x="656" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="436" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="656" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="84" fill="currentcolor" style="font-size:1em">E</text><text text-anchor="middle" x="664" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="436" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="664" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="84" fill="currentcolor" style="font-size:1em">M</text><text text-anchor="middle" x="672" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="672" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="84" fill="currentcolor" style="font-size:1em">O</text><text text-anchor="middle" x="680" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="680" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="84" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="688" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="688" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="84" fill="currentcolor" style="font-size:1em">Y</text><text text-anchor="middle" x="696" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="776" y="132" fill="currentcolor" style="font-size:1em">┐</text><text text-anchor="middle" x="776" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="196" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="260" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="276" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="308" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="340" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="372" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="404" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="452" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="468" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="484" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="500" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="516" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="532" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="548" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="564" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="580" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="596" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="612" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="628" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="644" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="660" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="808" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="308" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="340" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="372" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="420" fill="currentcolor" style="font-size:1em">▼</text><text text-anchor="middle" x="824" y="436" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="832" y="292" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="832" y="436" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="840" y="292" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="840" y="436" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="848" y="292" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="848" y="436" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="856" y="292" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="864" y="292" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="864" y="436" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="880" y="436" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="888" y="436" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>The <code>rbp</code> register holds a memory location, you subtract 4 from the rbp to make enough space for a <code>int</code> type data and then store the value at that location.</p><p>After executing the instruction, we&rsquo;ll get <code>0x1</code> in this location.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt;&gt;&gt; si
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; disas main
</span></span><span class=line><span class=cl>Dump of assembler code for function main:
</span></span><span class=line><span class=cl>   0x0000555555555119 &lt;+0&gt;:     push   rbp
</span></span><span class=line><span class=cl>   0x000055555555511a &lt;+1&gt;:     mov    rbp,rsp
</span></span><span class=line><span class=cl>   0x000055555555511d &lt;+4&gt;:     mov    DWORD PTR [rbp-0x4],0x1
</span></span><span class=line><span class=cl>=&gt; 0x0000555555555124 &lt;+11&gt;:    nop
</span></span><span class=line><span class=cl>   0x0000555555555125 &lt;+12&gt;:    pop    rbp
</span></span><span class=line><span class=cl>   0x0000555555555126 &lt;+13&gt;:    ret
</span></span><span class=line><span class=cl>End of assembler dump.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; p/x *(int *)($rbp-4)
</span></span><span class=line><span class=cl>$7 = 0x1
</span></span></code></pre></div><div class="goat svg-container"><svg xmlns="http://www.w3.org/2000/svg" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 904 681"><g transform="translate(8,16)"><text text-anchor="middle" x="48" y="372" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="56" y="372" fill="currentcolor" style="font-size:1em">B</text><text text-anchor="middle" x="56" y="388" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="56" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="56" y="452" fill="currentcolor" style="font-size:1em">└</text><text text-anchor="middle" x="64" y="372" fill="currentcolor" style="font-size:1em">P</text><text text-anchor="middle" x="64" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="80" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="420" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="88" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="420" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="88" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="372" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="96" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="420" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="96" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="104" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="104" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="112" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="112" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="120" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="128" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="128" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="136" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="136" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="144" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="420" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="152" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="420" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="160" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="420" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="168" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="420" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="176" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="420" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="184" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="388" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="388" fill="currentcolor" style="font-size:1em">┐</text><text text-anchor="middle" x="208" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="208" y="420" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="208" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="208" y="452" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="216" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="224" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="232" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="240" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="248" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="256" y="420" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="264" y="292" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="264" y="308" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="340" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="372" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="264" y="420" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="272" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="280" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="288" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="296" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="304" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="312" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="320" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="328" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="336" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="344" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="352" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="360" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="368" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="376" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="384" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="392" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="400" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="408" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="416" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="424" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="432" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="440" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="448" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="456" y="292" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="464" y="292" fill="currentcolor" style="font-size:1em">►</text><text text-anchor="middle" x="480" y="292" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="480" y="436" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="488" y="292" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="488" y="436" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="496" y="292" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="496" y="436" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="504" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="504" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="512" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="512" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="520" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="520" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="528" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="528" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="536" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="536" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="544" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="544" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="552" y="292" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="552" y="436" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="560" y="292" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="560" y="436" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="568" y="292" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="568" y="436" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="576" y="292" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="576" y="436" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="584" y="292" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="584" y="436" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="608" y="132" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="608" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="196" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="260" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="276" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="308" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="340" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="372" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="404" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="452" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="608" y="468" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="484" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="500" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="516" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="532" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="548" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="564" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="580" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="596" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="612" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="628" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="644" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="608" y="660" fill="currentcolor" style="font-size:1em">└</text><text text-anchor="middle" x="616" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="616" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="624" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="632" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="640" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="436" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="648" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="648" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="84" fill="currentcolor" style="font-size:1em">M</text><text text-anchor="middle" x="656" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="436" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="656" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="656" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="84" fill="currentcolor" style="font-size:1em">E</text><text text-anchor="middle" x="664" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="436" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="664" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="664" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="84" fill="currentcolor" style="font-size:1em">M</text><text text-anchor="middle" x="672" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="672" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="84" fill="currentcolor" style="font-size:1em">O</text><text text-anchor="middle" x="680" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="680" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="84" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="688" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="688" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="84" fill="currentcolor" style="font-size:1em">Y</text><text text-anchor="middle" x="696" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="696" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="704" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="712" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="720" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="728" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="736" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="744" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="752" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="760" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="276" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="308" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="340" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="404" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="452" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="768" y="660" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="776" y="132" fill="currentcolor" style="font-size:1em">┐</text><text text-anchor="middle" x="776" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="196" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="260" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="276" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="308" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="340" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="372" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="404" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="420" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="436" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="452" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="776" y="468" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="484" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="500" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="516" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="532" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="548" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="564" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="580" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="596" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="612" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="628" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="644" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="776" y="660" fill="currentcolor" style="font-size:1em">┘</text><text text-anchor="middle" x="808" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="308" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="324" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="340" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="372" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="388" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="404" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="808" y="420" fill="currentcolor" style="font-size:1em">▼</text><text text-anchor="middle" x="824" y="436" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="832" y="292" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="832" y="436" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="840" y="292" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="840" y="436" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="848" y="292" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="848" y="436" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="856" y="292" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="864" y="292" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="864" y="436" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="880" y="436" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="888" y="436" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>This should give you a little idea of how the references work and where does the <code>0x1</code> is actually stored.</p><p>With that out of our plate, let&rsquo;s get back to the original instruction in question - <code>mov DWORD PTR [rbp-4], 1</code>. This instruction surely stores the value <code>0x1</code> in the location pointed by <code>rbp - 4</code> memory location.</p><p>Then there is the same old <code>nop</code> and <code>epilogue</code>. Nothing new here. Let&rsquo;s add more variables to the function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>d</span><span class=o>=</span><span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Below is the disassembly for this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-8</span><span class=p>],</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-12</span><span class=p>],</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-16</span><span class=p>],</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-20</span><span class=p>],</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>Each variable is created in sequence and have a space of <code>4</code> bytes to save an <code>int</code> type data in it. <code>Int</code> data types have a size of <code>4</code> bytes, so this makes sense.</p><p>Another commonly used data type is <code>char</code>, which requires a smaller size than <code>int</code>, <code>1 byte</code> in total.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>d</span><span class=o>=</span><span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Yes, the above program is completely correct from the standpoint of a compiler. When storing data in char types, we don&rsquo;t always need single quotes.</p><p>Anyway, the disassembly for this is as follows:-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-3</span><span class=p>],</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-5</span><span class=p>],</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>There is now a noticeable difference between this disassembly and the previous one. The <code>DWORD</code> has been changed to <code>BYTE</code> in this case, which means that less memory is required to store this data, as evidenced by the memory locations used for storage - <code>rbp-1,</code> <code>rbp-2</code>, and so on - each of which has only <code>1 byte</code> of storage.</p><p>Fun thing, with the help of some computer maths, we can find out that the highest number that can be stored in 1 byte storage location is 127. So if we store any number bigger than this, it&rsquo;ll start shifting to the negative range and then loop back.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>127</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>128</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>129</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>130</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>disassembly for this code:-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=p>-</span><span class=mi>128</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-3</span><span class=p>],</span> <span class=p>-</span><span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=p>-</span><span class=mi>126</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>Good, now we also know how <code>int</code> and <code>char</code> looks like in their disassembly output. Let&rsquo;s mix things up a bit to level up and learn something new.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>127</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>128</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>129</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>130</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>131</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>4 <code>char</code> and then 1 <code>int</code>.</p><ul><li><code>rbp-1</code> for <code>a</code>.</li><li><code>rbp-2</code> for <code>b</code>.</li><li><code>rbp-3</code> for <code>c</code>.</li><li><code>rbp-4</code> for <code>d</code>.</li><li><code>rbp-8</code> for <code>e</code>. Because int takes 4 bytes (This can depend on the OS, architecture and compiler you are using).</li></ul><p>Let&rsquo;s check the disassembly to see if we got this right or not.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=p>-</span><span class=mi>128</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-3</span><span class=p>],</span> <span class=p>-</span><span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=p>-</span><span class=mi>126</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-8</span><span class=p>],</span> <span class=mi>131</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>Woohooo!!</p><p><img loading=lazy src=https://media.giphy.com/media/xT1Ra6fhiJdvL7A8hi/giphy.gif#center alt></p><p>Though there is one thing I want you to notice&mldr; The <code>int</code> value did not follow the same pattern as <code>char</code> values because <code>char</code> is smaller in size and cannot store a very large value, whereas <code>int</code> is comparatively larger and can store the assigned value without any storage issues. As a result, the <code>int</code> value remained unchanged from the source code, while the <code>char</code> values became negative.</p><p>Now, let&rsquo;s change the order of the variables and see how it gets interesting.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>127</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>128</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>131</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>129</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>130</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>disassembly for this code:-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=p>-</span><span class=mi>128</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-8</span><span class=p>],</span> <span class=mi>131</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-9</span><span class=p>],</span> <span class=p>-</span><span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-10</span><span class=p>],</span> <span class=p>-</span><span class=mi>126</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>Well, you can see the size needed for each variable has changed. It&rsquo;s time to be aware of a concept called <a href=https://en.wikipedia.org/wiki/Data_structure_alignment><strong>Data structure alignment</strong></a>.</p><p>According to wikipedia,</p><blockquote><p>The CPU in modern computer hardware performs reads and writes to memory most efficiently when the data is naturally aligned, which generally means that the data&rsquo;s memory address is a multiple of the data size. For instance, in a 32-bit architecture, the data may be aligned if the data is stored in four consecutive bytes and the first byte lies on a 4-byte boundary.</p></blockquote><p>Read <a href=https://developer.ibm.com/articles/pa-dalign/>this article</a> <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> to gain better understanding of data alignment and why is it even a concerning thing for us.</p><p>For now, just know that usually 64-bit CPUs have a native 4-byte load. That means, it can pick up 4 bytes in a single turn and use them for something.</p><p>Let&rsquo;s visualize the memory layout for the variables in above code.</p><div class="goat svg-container"><svg xmlns="http://www.w3.org/2000/svg" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 240 393"><g transform="translate(8,16)"><text text-anchor="middle" x="32" y="68" fill="currentcolor" style="font-size:1em">┌</text><text text-anchor="middle" x="32" y="84" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="100" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="116" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="132" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="32" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="196" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="32" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="260" fill="currentcolor" style="font-size:1em">├</text><text text-anchor="middle" x="32" y="276" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="32" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="40" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="40" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="40" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="40" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="48" y="52" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="48" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="48" y="100" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="48" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="48" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="48" y="228" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="48" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="48" y="372" fill="currentcolor" style="font-size:1em">◄</text><text text-anchor="middle" x="56" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="56" y="100" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="56" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="56" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="56" y="228" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="56" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="56" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="20" fill="currentcolor" style="font-size:1em">◄</text><text text-anchor="middle" x="64" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="100" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="64" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="228" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="64" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="64" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="228" fill="currentcolor" style="font-size:1em">7</text><text text-anchor="middle" x="72" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="72" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="80" y="68" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="80" y="84" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="100" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="116" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="132" fill="currentcolor" style="font-size:1em">┴</text><text text-anchor="middle" x="80" y="196" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="80" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="260" fill="currentcolor" style="font-size:1em">┼</text><text text-anchor="middle" x="80" y="276" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="80" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="88" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="100" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="96" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="228" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="96" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="96" y="356" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="96" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="52" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="104" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="100" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="104" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="228" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="104" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="104" y="356" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="104" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="112" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="100" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="112" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="228" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="112" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="112" y="356" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="112" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="100" fill="currentcolor" style="font-size:1em">8</text><text text-anchor="middle" x="120" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="164" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="120" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="228" fill="currentcolor" style="font-size:1em">6</text><text text-anchor="middle" x="120" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="120" y="356" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="120" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="128" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="128" y="68" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="128" y="84" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="100" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="116" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="132" fill="currentcolor" style="font-size:1em">┴</text><text text-anchor="middle" x="128" y="164" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="128" y="196" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="128" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="260" fill="currentcolor" style="font-size:1em">┼</text><text text-anchor="middle" x="128" y="276" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="128" y="356" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="128" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="136" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="164" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="136" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="136" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="144" y="356" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="144" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="52" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="152" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="152" y="356" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="152" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="160" y="356" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="160" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="168" y="356" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="168" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="20" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="176" y="68" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="176" y="84" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="100" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="116" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="132" fill="currentcolor" style="font-size:1em">┴</text><text text-anchor="middle" x="176" y="196" fill="currentcolor" style="font-size:1em">┬</text><text text-anchor="middle" x="176" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="260" fill="currentcolor" style="font-size:1em">┼</text><text text-anchor="middle" x="176" y="276" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="176" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="20" fill="currentcolor" style="font-size:1em">►</text><text text-anchor="middle" x="184" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="184" y="356" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="184" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="192" y="356" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="192" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="52" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="200" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="200" y="356" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="200" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="208" y="356" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="208" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="216" y="68" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="216" y="132" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="216" y="196" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="216" y="260" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="216" y="372" fill="currentcolor" style="font-size:1em">─</text><text text-anchor="middle" x="224" y="68" fill="currentcolor" style="font-size:1em">┐</text><text text-anchor="middle" x="224" y="84" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="100" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="116" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="132" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="224" y="148" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="164" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="180" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="196" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="224" y="212" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="228" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="244" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="260" fill="currentcolor" style="font-size:1em">┤</text><text text-anchor="middle" x="224" y="276" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="292" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="340" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="356" fill="currentcolor" style="font-size:1em">│</text><text text-anchor="middle" x="224" y="372" fill="currentcolor" style="font-size:1em">┘</text></g></svg></div><p>The above diagram of memory is aligned in a 4 byte load. The first 2 variables are a <code>BYTE</code> type so the values are places in the first 2 blocks of the first row. Next variable is an <code>INT</code> type, which is equivalent to 4 bytes. But there are no 4 bytes available in the first row, so in order to keep the atomicity, this variable was stored in the next row. <em>(<a href=https://stackoverflow.com/questions/36624881/why-is-integer-assignment-on-a-naturally-aligned-variable-atomic-on-x86>WHY atomicity??</a>)</em></p><p>So does it mean that we have that 2 bytes space just lying there?? - YES! you can use it if you want. Take a look at the below source code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>127</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>128</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>111</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>112</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>131</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>129</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>130</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=p>-</span><span class=mi>128</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-3</span><span class=p>],</span> <span class=mi>111</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=mi>112</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-8</span><span class=p>],</span> <span class=mi>131</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-9</span><span class=p>],</span> <span class=p>-</span><span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-10</span><span class=p>],</span> <span class=p>-</span><span class=mi>126</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>No change in the layout&mldr; variable <code>x</code> and <code>y</code> will fill up the 2 Bytes space that were just lying there to be used.</p><p>But if we add 1 more variable <code>z</code>, then the whole thing moves.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>127</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>128</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>111</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>112</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>Z</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>e</span> <span class=o>=</span> <span class=mi>131</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>129</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>130</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-asm data-lang=asm><span class=line><span class=cl><span class=nl>main:</span>
</span></span><span class=line><span class=cl>        <span class=nf>push</span>    <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>rbp</span><span class=p>,</span> <span class=no>rsp</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-1</span><span class=p>],</span> <span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-2</span><span class=p>],</span> <span class=p>-</span><span class=mi>128</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-3</span><span class=p>],</span> <span class=mi>111</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-4</span><span class=p>],</span> <span class=mi>112</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-5</span><span class=p>],</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>DWORD</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-12</span><span class=p>],</span> <span class=mi>131</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-13</span><span class=p>],</span> <span class=p>-</span><span class=mi>127</span>
</span></span><span class=line><span class=cl>        <span class=nf>mov</span>     <span class=no>BYTE</span> <span class=no>PTR</span> <span class=p>[</span><span class=no>rbp-14</span><span class=p>],</span> <span class=p>-</span><span class=mi>126</span>
</span></span><span class=line><span class=cl>        <span class=nf>nop</span>
</span></span><span class=line><span class=cl>        <span class=nf>pop</span>     <span class=no>rbp</span>
</span></span><span class=line><span class=cl>        <span class=nf>ret</span>
</span></span></code></pre></div><p>If you are still visualizing the way I displayed above, now we have 3 bytes space in the row 2. This space is added by the compiler and is termed as <strong>padding</strong>. We can not always avoid padding, but a good programmer can arrange the variables in a way to minimize this.</p><p>That was a long detour, but definetily worth it. I&rsquo;ll cover more examples in later parts of this series. Till then, ciao!!</p><p><img loading=lazy src=https://media.giphy.com/media/ie6l26rkxYA885tLqo/giphy.gif#center alt></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://en.wikipedia.org/wiki/Disassembler#Examples_of_disassemblers>https://en.wikipedia.org/wiki/Disassembler#Examples_of_disassemblers</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://developer.ibm.com/articles/pa-dalign/>https://developer.ibm.com/articles/pa-dalign/</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://ayedaemon.github.io/tags/re/>RE</a></li><li><a href=https://ayedaemon.github.io/tags/linux/>Linux</a></li><li><a href=https://ayedaemon.github.io/tags/c-programming/>C programming</a></li></ul><nav class=paginav><a class=prev href=https://ayedaemon.github.io/post/2023/04/intro-to-re-part-3/><span class=title>« Next</span><br><span>Intro to Re: C : part-3</span>
</a><a class=next href=https://ayedaemon.github.io/post/2022/12/pluggable-authentication-modules-linux/><span class=title>Prev »</span><br><span>Pluggable Authentication Modules - Linux</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://ayedaemon.github.io/>Connected</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>