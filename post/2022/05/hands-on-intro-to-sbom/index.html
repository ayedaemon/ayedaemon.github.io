<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hands-on Intro to SBOM | Connected</title>
<meta name=keywords content="sbom,docker,security"><meta name=description content="The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software."><meta name=author content="ayedaemon"><link rel=canonical href=https://ayedaemon.github.io/post/2022/05/hands-on-intro-to-sbom/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ayedaemon.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ayedaemon.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ayedaemon.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ayedaemon.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ayedaemon.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Hands-on Intro to SBOM"><meta property="og:description" content="The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software."><meta property="og:type" content="article"><meta property="og:url" content="https://ayedaemon.github.io/post/2022/05/hands-on-intro-to-sbom/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-05-27T22:56:22+05:30"><meta property="article:modified_time" content="2023-11-23T22:32:16+05:30"><meta property="og:site_name" content="Connected"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hands-on Intro to SBOM"><meta name=twitter:description content="The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ayedaemon.github.io/post/"},{"@type":"ListItem","position":2,"name":"Hands-on Intro to SBOM","item":"https://ayedaemon.github.io/post/2022/05/hands-on-intro-to-sbom/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hands-on Intro to SBOM","name":"Hands-on Intro to SBOM","description":"The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software.","keywords":["sbom","docker","security"],"articleBody":"The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software.\nWhat is SBOM ?? A software bill of materials (SBOM) is a formal record of the components used to develop software and its software supply chain relationships, according to the National Telecommunications and Information Administration (NTIA). An SBOM covers both open source (OSS) and proprietary software, creating transparency into potential vulnerabilities and elements within the software. SBOMs can be used for vulnerability management and product integrity.\nAn SBOM is useful both to the builder (manufacturer) and the buyer (customer) of a software product. Builders often leverage available open source and third-party software components to create a product; an SBOM allows the builder to make sure those components are up to date and to respond quickly to new vulnerabilities. Buyers can use an SBOM to perform vulnerability or license analysis, both of which can be used to evaluate risk in a product.\nWhy SBOM ?? There could be multiple usages of SBOM, like\neasy End-Of-Life management for dependencies and product itself. License obligations and policy compliance. For developers, it can help to unbloat the software by identifying the BOM and clean up unused things or can use it for quality assurance. Identify and eliminate vulnerabilities from early stages (more shift left) There are many artifacts that can provide SBOM information and this information can be correlated and used together to provide better security insights. These artifacts could be the source code, executables, published softwares, or in devops world, containers!!\nContainers are easy way to package and deliver software; Container is like an encapsulated artifact. Here we can get SBOM for Application dependencies, Secret code, OS packages, Licenses, File data, Configuration files, Container meta-data, etc. When it comes to security, it’s important to know every part of the system. SBOM gives you a clear list of components that help in monitoring every part for vulnerabilities.\nExisting SBOM formats A new SBOM can be created and published in various formats including HTML, CSV, PDF, Markdown, and plain text. SBOM formats are still in development and new formats might arise in future that can address specific problems in a better way. Currently used formats are - Software Package Data Exchange (SPDX), Software Identification (SWID) Tags, and Cyclone DX.\nSPDX Also known as ISO/IEC 5962:2021, SPDX is spearheaded by The Linux Foundation. It is an open standard for describing SBOM information related to provenance, licensing, and security.\nSWID Tags This format identifies and reports software components under four categories across the development lifecycle:\nCorpus Tags: Identifies and describes components in a pre-installation stage. Primary Tags: Identifies and describes components in a post-installation stage. Patch Tags: Identifies and describes the patch. Supplement Tags: Allows only the tag creator to modify corpus, primary, and patch tags. Cyclone DX Managed by Cyclone DX’s core working group, it is designed for application security contexts. Cyclone DX is considered a lightweight standard with features of both SPDX and SWID. It includes four data fields:\nBOM Metadata: Description of the supplier, manufacturer, component, and compilation tools. Components: Complete information of a proprietary and open-source components along with licensing requirements. Services: A list of external APIs that the software may invoke. Dependencies: All forms of relationship within the supply chain. Don’t talk, show!! For the demo, I’ve created a basic flask application that says hello and have containerized it into 3 different base images - ubuntu, alpine and distroless.\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 783618b1c6df sbom_distroless \"/usr/bin/python3.9 …\" 9 seconds ago Up 7 seconds sbom_distroless_demo 3ed64aef4767 sbom_alpine \"python app.py\" 16 seconds ago Up 14 seconds sbom_alpine_demo fe18c421777a sbom_ubuntu \"python3 app.py\" 19 seconds ago Up 17 seconds sbom_ubuntu_demo We can check the size of the container image using docker images command.\nsbom_distroless latest 6ef7ccd61f84 38 minutes ago 166MB sbom_alpine latest e7e71b412cf5 About an hour ago 161MB sbom_ubuntu latest 9e2166292230 About an hour ago 573MB If you want to get more details about the size of each layer then you can use docker history command. More information about the running container (process) can be obtained using docker inspect .\nAll these commands are good, but they do not provide any information about the application and its dependencies. Docker has recently announced its experimental feature - docker sbom, that allows us to generate the SBOM of a container image. Today, it does this by scanning the layers of the image using the Syft project but in future it may read the SBOM from the image itself or elsewhere.\nLet’s generate a SBOM for our containers by directly using the syft project.\nsyft sbom_distroless ✔ Loaded image ✔ Parsed image ✔ Cataloged packages [69 packages] NAME VERSION TYPE Flask 2.1.2 python Jinja2 3.1.2 python MarkupSafe 2.1.1 python Werkzeug 2.1.2 python base-files 11.1+deb11u3 deb boto3 1.23.9 python botocore 1.26.9 python certifi 2022.5.18.1 python charset-normalizer 2.0.12 python click 8.1.3 python dash 0.5.11+git20200708+dd9ef66-5 deb idna 3.3 python importlib-metadata 4.11.4 python itsdangerous 2.1.2 python jmespath 1.0.0 python libbz2-1.0 1.0.8-4 deb libc-bin 2.31-13+deb11u3 deb libc6 2.31-13+deb11u3 deb libcom-err2 1.46.2-2 deb libcrypt1 1:4.4.18-4 deb libdb5.3 5.3.28+dfsg1-0.8 deb libexpat1 2.2.10-2+deb11u3 deb libffi7 3.3-6 deb libgcc-s1 10.2.1-6 deb libgomp1 10.2.1-6 deb libgssapi-krb5-2 1.18.3-6+deb11u1 deb libk5crypto3 1.18.3-6+deb11u1 deb libkeyutils1 1.6.1-2 deb libkrb5-3 1.18.3-6+deb11u1 deb libkrb5support0 1.18.3-6+deb11u1 deb liblzma5 5.2.5-2.1~deb11u1 deb libmpdec3 2.5.1-1 deb libncursesw6 6.2+20201114-2 deb libnsl2 1.3.0-2 deb libpython3.9-minimal 3.9.2-1 deb libreadline8 8.1-1 deb libsqlite3-0 3.34.1-3 deb libssl1.1 1.1.1n-0+deb11u2 deb libstdc++6 10.2.1-6 deb libtinfo6 6.2+20201114-2 deb libtirpc3 1.3.1-1 deb libuuid1 2.36.1-8+deb11u1 deb netbase 6.3 deb openssl 1.1.1n-0+deb11u2 deb pip 22.0.4 python pip 22.1.1 python python-dateutil 2.8.2 python python3-distutils 3.9.2-1 deb requests 2.27.1 python s3transfer 0.5.2 python setuptools 58.1.0 python six 1.16.0 python tzdata 2021a-1+deb11u3 deb urllib3 1.26.9 python wheel 0.37.1 python zipp 3.8.0 python zlib1g 1:1.2.11.dfsg-2+deb11u1 deb By default, syft parses and analyses the final layer of the container and displays the tabular result on the standard output (stdout). This is good if we just want to see the SBOM ourselves and not want to share it with other tools or people. To save the output to a file you can use --file option and you can also specify another formats that are widely used by community with -o or --output flag. Below bash script will create cyclonedx-json , github-json, spdx-jsonand syft-json format SBOMs and also store them in their respective files.\nmkdir -p generated_sboms; for i in sbom_{ubuntu,distroless,alpine}; do mkdir -p generated_sboms/$i echo $i; syft $i \\ -o syft-json=generated_sboms/$i/syft.json \\ -o spdx-json=generated_sboms/$i/spdx.json \\ -o github-json=generated_sboms/$i/github.json \\ -o cyclonedx-json=generated_sboms/$i/cyclonedx.json done Output of the above script provides us with package count for each image and it is clear that the ubuntu has most of them as it is a full fledged distro with a lot of system files, manpages, etc… and distroless images have the least one. The idea of distroless is somewhat over-hyped in the world of containers and sometimes it can be related with security ideas of minimum attack surface. Here is a RedHat article that try to give a clear understanding of the benefits of distroless containers and myths around it.\nsbom_ubuntu ✔ Loaded image ✔ Parsed image ✔ Cataloged packages [265 packages] sbom_distroless ✔ Loaded image ✔ Parsed image ✔ Cataloged packages [69 packages] sbom_alpine ✔ Loaded image ✔ Parsed image ✔ Cataloged packages [71 packages] And it’ll create a directory with organised json files\n# tree generated_sboms/ generated_sboms/ ├── sbom_alpine │ ├── cyclonedx.json │ ├── github.json │ ├── spdx.json │ └── syft.json ├── sbom_distroless │ ├── cyclonedx.json │ ├── github.json │ ├── spdx.json │ └── syft.json └── sbom_ubuntu ├── cyclonedx.json ├── github.json ├── spdx.json └── syft.json Now we have our sbom files and we can share these files to other people who need it. It can be our customers, external auditors, Incident response team, etc etc… Also we can use these files with another tool that can check these images for vulnerabilities. One such tool is grype - A vulnerability scanner for container images and filesystems that works exceptionally with Syft. Below script will generate grype results for all the 3 images using their respective spdx.json files.\nmkdir -p grype_results; for i in sbom_{ubuntu,distroless,alpine}; do echo $i; mkdir -p grype_results/$i grype sbom:./generated_sboms/sbom_ubuntu/spdx.json \\ -o json \\ --file grype_results/$i/all.json done Like all static analysers, this tool might generate tons of false positives. Apart from this, grype tool provides tons of configuration features that can come in handy for automations and several other usecases. A lot of other commercial and open-source tools are arising that can leverage SBOMs and can help to solve problems around licencing and policy compliene, security audits, quality assurance, etc.\nSBOM misconception There are few misconeptions or myths about SBOMs like it can :-\nbe a roadmap to the attacker ? require source code disclosure ? expose my intellectual properties ? .. etc Here is a NTIA publication that covers explaination of some such myths V/S facts.\n","wordCount":"1526","inLanguage":"en","datePublished":"2022-05-27T22:56:22+05:30","dateModified":"2023-11-23T22:32:16+05:30","author":[{"@type":"Person","name":"ayedaemon"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://ayedaemon.github.io/post/2022/05/hands-on-intro-to-sbom/"},"publisher":{"@type":"Organization","name":"Connected","logo":{"@type":"ImageObject","url":"https://ayedaemon.github.io/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://ayedaemon.github.io/ accesskey=h title="Connected (Alt + H)">Connected</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://ayedaemon.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://ayedaemon.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://ayedaemon.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ayedaemon.github.io/series/ title=Series><span>Series</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ayedaemon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ayedaemon.github.io/post/>Posts</a></div><h1 class=post-title>Hands-on Intro to SBOM</h1><div class=post-meta><span title='2022-05-27 22:56:22 +0530 +0530'>May 27, 2022</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1526 words&nbsp;·&nbsp;ayedaemon&nbsp;|&nbsp;<a href=https://github.com/ayedaemon/ayedaemon.github.io/tree/main/content/post/2022/05/hands-on-intro-to-sbom.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#what-is-sbom->What is SBOM ??</a></li><li><a href=#why-sbom->Why SBOM ??</a></li><li><a href=#existing-sbom-formats>Existing SBOM formats</a></li><li><a href=#dont-talk-show>Don&rsquo;t talk, show!!</a></li><li><a href=#sbom-misconception>SBOM misconception</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>The concept of a Bill Of Materials (BOM) is well-established in traditional manufacturing as part of supply chain management. A manufacturer uses a BOM to track the parts it uses to create a product. If defects are later found in a specific part, the BOM makes it easy to locate affected products. In software industry, this concept is fairly new and is used to keep track of all the ingredients of the software.</p><h3 id=what-is-sbom->What is SBOM ??<a hidden class=anchor aria-hidden=true href=#what-is-sbom->#</a></h3><p>A software bill of materials (SBOM) is a formal record of the components used to develop software and its software supply chain relationships, according to the National Telecommunications and Information Administration (NTIA). An SBOM covers both open source (OSS) and proprietary software, creating transparency into potential vulnerabilities and elements within the software. SBOMs can be used for vulnerability management and product integrity.</p><p>An SBOM is useful both to the builder (manufacturer) and the buyer (customer) of a software product. Builders often leverage available open source and third-party software components to create a product; an SBOM allows the builder to make sure those components are up to date and to respond quickly to new vulnerabilities. Buyers can use an SBOM to perform vulnerability or license analysis, both of which can be used to evaluate risk in a product.</p><h3 id=why-sbom->Why SBOM ??<a hidden class=anchor aria-hidden=true href=#why-sbom->#</a></h3><p>There could be multiple usages of SBOM, like</p><ul><li>easy End-Of-Life management for dependencies and product itself.</li><li>License obligations and policy compliance.</li><li>For developers, it can help to unbloat the software by identifying the BOM and clean up unused things or can use it for quality assurance.</li><li>Identify and eliminate vulnerabilities from early stages (more shift left)</li></ul><p>There are many artifacts that can provide SBOM information and this information can be correlated and used together to provide better security insights. These artifacts could be the source code, executables, published softwares, or in devops world, <strong>containers</strong>!!</p><p>Containers are easy way to package and deliver software; Container is like an encapsulated artifact. Here we can get SBOM for <strong>Application dependencies, Secret code, OS packages, Licenses, File data, Configuration files, Container meta-data, etc</strong>. When it comes to security, it’s important to know every part of the system. SBOM gives you a clear list of components that help in monitoring every part for vulnerabilities.</p><h3 id=existing-sbom-formats>Existing SBOM formats<a hidden class=anchor aria-hidden=true href=#existing-sbom-formats>#</a></h3><p>A new SBOM can be created and published in various formats including HTML, CSV, PDF, Markdown, and plain text. SBOM formats are still in development and new formats might arise in future that can address specific problems in a better way. Currently used formats are - Software Package Data Exchange (SPDX), Software Identification (SWID) Tags, and Cyclone DX.</p><ol><li><a href=https://spdx.dev/><strong>SPDX</strong></a></li></ol><p>Also known as ISO/IEC 5962:2021, SPDX is spearheaded by The Linux Foundation. It is an open standard for describing SBOM information related to provenance, licensing, and security.</p><ol start=2><li><a href=https://csrc.nist.gov/projects/Software-Identification-SWID><strong>SWID Tags</strong></a></li></ol><p>This format identifies and reports software components under four categories across the development lifecycle:</p><ul><li>Corpus Tags: Identifies and describes components in a pre-installation stage.</li><li>Primary Tags: Identifies and describes components in a post-installation stage.</li><li>Patch Tags: Identifies and describes the patch.</li><li>Supplement Tags: Allows only the tag creator to modify corpus, primary, and patch tags.</li></ul><ol start=3><li><a href=https://cyclonedx.org/><strong>Cyclone DX</strong></a></li></ol><p>Managed by Cyclone DX’s core working group, it is designed for application security contexts. Cyclone DX is considered a lightweight standard with features of both SPDX and SWID. It includes four data fields:</p><ul><li><strong>BOM Metadata</strong>: Description of the supplier, manufacturer, component, and compilation tools.</li><li><strong>Components</strong>: Complete information of a proprietary and open-source components along with licensing requirements.</li><li><strong>Services</strong>: A list of external APIs that the software may invoke.</li><li><strong>Dependencies</strong>: All forms of relationship within the supply chain.</li></ul><h3 id=dont-talk-show>Don&rsquo;t talk, show!!<a hidden class=anchor aria-hidden=true href=#dont-talk-show>#</a></h3><p>For the demo, I&rsquo;ve created a basic flask application that says hello and have containerized it into 3 different base images - ubuntu, alpine and distroless.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>CONTAINER ID   IMAGE             COMMAND                  CREATED          STATUS          PORTS     NAMES
</span></span><span class=line><span class=cl>783618b1c6df   sbom_distroless   <span class=s2>&#34;/usr/bin/python3.9 …&#34;</span>   <span class=m>9</span> seconds ago    Up <span class=m>7</span> seconds              sbom_distroless_demo
</span></span><span class=line><span class=cl>3ed64aef4767   sbom_alpine       <span class=s2>&#34;python app.py&#34;</span>          <span class=m>16</span> seconds ago   Up <span class=m>14</span> seconds             sbom_alpine_demo
</span></span><span class=line><span class=cl>fe18c421777a   sbom_ubuntu       <span class=s2>&#34;python3 app.py&#34;</span>         <span class=m>19</span> seconds ago   Up <span class=m>17</span> seconds             sbom_ubuntu_demo
</span></span></code></pre></div><p>We can check the size of the container image using <code>docker images</code> command.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>sbom_distroless             latest       6ef7ccd61f84   38 minutes ago      166MB
</span></span><span class=line><span class=cl>sbom_alpine                 latest       e7e71b412cf5   About an hour ago   161MB
</span></span><span class=line><span class=cl>sbom_ubuntu                 latest       9e2166292230   About an hour ago   573MB
</span></span></code></pre></div><p>If you want to get more details about the size of each layer then you can use <code>docker history &lt;image></code> command. More information about the running container (process) can be obtained using <code>docker inspect &lt;container></code>.</p><p>All these commands are good, but they do not provide any information about the application and its dependencies. Docker has recently announced its experimental feature - <code>docker sbom</code>, that allows us to generate the SBOM of a container image. Today, it does this by scanning the layers of the image using the <a href=https://github.com/anchore/syft><strong>Syft</strong></a> project but in future it may read the SBOM from the image itself or elsewhere.</p><p>Let&rsquo;s generate a SBOM for our containers by directly using the syft project.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>syft sbom_distroless
</span></span><span class=line><span class=cl> ✔ Loaded image
</span></span><span class=line><span class=cl> ✔ Parsed image
</span></span><span class=line><span class=cl> ✔ Cataloged packages      [69 packages]
</span></span><span class=line><span class=cl>NAME                  VERSION                       TYPE
</span></span><span class=line><span class=cl>Flask                 2.1.2                         python
</span></span><span class=line><span class=cl>Jinja2                3.1.2                         python
</span></span><span class=line><span class=cl>MarkupSafe            2.1.1                         python
</span></span><span class=line><span class=cl>Werkzeug              2.1.2                         python
</span></span><span class=line><span class=cl>base-files            11.1+deb11u3                  deb
</span></span><span class=line><span class=cl>boto3                 1.23.9                        python
</span></span><span class=line><span class=cl>botocore              1.26.9                        python
</span></span><span class=line><span class=cl>certifi               2022.5.18.1                   python
</span></span><span class=line><span class=cl>charset-normalizer    2.0.12                        python
</span></span><span class=line><span class=cl>click                 8.1.3                         python
</span></span><span class=line><span class=cl>dash                  0.5.11+git20200708+dd9ef66-5  deb
</span></span><span class=line><span class=cl>idna                  3.3                           python
</span></span><span class=line><span class=cl>importlib-metadata    4.11.4                        python
</span></span><span class=line><span class=cl>itsdangerous          2.1.2                         python
</span></span><span class=line><span class=cl>jmespath              1.0.0                         python
</span></span><span class=line><span class=cl>libbz2-1.0            1.0.8-4                       deb
</span></span><span class=line><span class=cl>libc-bin              2.31-13+deb11u3               deb
</span></span><span class=line><span class=cl>libc6                 2.31-13+deb11u3               deb
</span></span><span class=line><span class=cl>libcom-err2           1.46.2-2                      deb
</span></span><span class=line><span class=cl>libcrypt1             1:4.4.18-4                    deb
</span></span><span class=line><span class=cl>libdb5.3              5.3.28+dfsg1-0.8              deb
</span></span><span class=line><span class=cl>libexpat1             2.2.10-2+deb11u3              deb
</span></span><span class=line><span class=cl>libffi7               3.3-6                         deb
</span></span><span class=line><span class=cl>libgcc-s1             10.2.1-6                      deb
</span></span><span class=line><span class=cl>libgomp1              10.2.1-6                      deb
</span></span><span class=line><span class=cl>libgssapi-krb5-2      1.18.3-6+deb11u1              deb
</span></span><span class=line><span class=cl>libk5crypto3          1.18.3-6+deb11u1              deb
</span></span><span class=line><span class=cl>libkeyutils1          1.6.1-2                       deb
</span></span><span class=line><span class=cl>libkrb5-3             1.18.3-6+deb11u1              deb
</span></span><span class=line><span class=cl>libkrb5support0       1.18.3-6+deb11u1              deb
</span></span><span class=line><span class=cl>liblzma5              5.2.5-2.1~deb11u1             deb
</span></span><span class=line><span class=cl>libmpdec3             2.5.1-1                       deb
</span></span><span class=line><span class=cl>libncursesw6          6.2+20201114-2                deb
</span></span><span class=line><span class=cl>libnsl2               1.3.0-2                       deb
</span></span><span class=line><span class=cl>libpython3.9-minimal  3.9.2-1                       deb
</span></span><span class=line><span class=cl>libreadline8          8.1-1                         deb
</span></span><span class=line><span class=cl>libsqlite3-0          3.34.1-3                      deb
</span></span><span class=line><span class=cl>libssl1.1             1.1.1n-0+deb11u2              deb
</span></span><span class=line><span class=cl>libstdc++6            10.2.1-6                      deb
</span></span><span class=line><span class=cl>libtinfo6             6.2+20201114-2                deb
</span></span><span class=line><span class=cl>libtirpc3             1.3.1-1                       deb
</span></span><span class=line><span class=cl>libuuid1              2.36.1-8+deb11u1              deb
</span></span><span class=line><span class=cl>netbase               6.3                           deb
</span></span><span class=line><span class=cl>openssl               1.1.1n-0+deb11u2              deb
</span></span><span class=line><span class=cl>pip                   22.0.4                        python
</span></span><span class=line><span class=cl>pip                   22.1.1                        python
</span></span><span class=line><span class=cl>python-dateutil       2.8.2                         python
</span></span><span class=line><span class=cl>python3-distutils     3.9.2-1                       deb
</span></span><span class=line><span class=cl>requests              2.27.1                        python
</span></span><span class=line><span class=cl>s3transfer            0.5.2                         python
</span></span><span class=line><span class=cl>setuptools            58.1.0                        python
</span></span><span class=line><span class=cl>six                   1.16.0                        python
</span></span><span class=line><span class=cl>tzdata                2021a-1+deb11u3               deb
</span></span><span class=line><span class=cl>urllib3               1.26.9                        python
</span></span><span class=line><span class=cl>wheel                 0.37.1                        python
</span></span><span class=line><span class=cl>zipp                  3.8.0                         python
</span></span><span class=line><span class=cl>zlib1g                1:1.2.11.dfsg-2+deb11u1       deb
</span></span></code></pre></div><p>By default, syft parses and analyses the final layer of the container and displays the tabular result on the standard output (stdout). This is good if we just want to see the SBOM ourselves and not want to share it with other tools or people. To save the output to a file you can use <code>--file</code> option and you can also specify another formats that are widely used by community with <code>-o</code> or <code>--output</code> flag. Below bash script will create <code>cyclonedx-json</code> , <code>github-json</code>, <code>spdx-json</code>and <code>syft-json</code> format SBOMs and also store them in their respective files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p generated_sboms<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> i in sbom_<span class=o>{</span>ubuntu,distroless,alpine<span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>mkdir -p generated_sboms/<span class=nv>$i</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>syft <span class=nv>$i</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-o syft-json<span class=o>=</span>generated_sboms/<span class=nv>$i</span>/syft.json <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-o spdx-json<span class=o>=</span>generated_sboms/<span class=nv>$i</span>/spdx.json <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-o github-json<span class=o>=</span>generated_sboms/<span class=nv>$i</span>/github.json <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-o cyclonedx-json<span class=o>=</span>generated_sboms/<span class=nv>$i</span>/cyclonedx.json
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>Output of the above script provides us with package count for each image and it is clear that the ubuntu has most of them as it is a full fledged distro with a lot of system files, manpages, etc&mldr; and distroless images have the least one. The idea of distroless is somewhat over-hyped in the world of containers and sometimes it can be related with
security ideas of minimum attack surface. <a href=https://www.redhat.com/en/blog/why-distroless-containers-arent-security-solution-you-think-they-are>Here is a RedHat article</a> that try to give a clear understanding of the benefits of distroless containers and myths around it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>sbom_ubuntu
</span></span><span class=line><span class=cl> ✔ Loaded image
</span></span><span class=line><span class=cl> ✔ Parsed image
</span></span><span class=line><span class=cl> ✔ Cataloged packages      [265 packages]
</span></span><span class=line><span class=cl>sbom_distroless
</span></span><span class=line><span class=cl> ✔ Loaded image
</span></span><span class=line><span class=cl> ✔ Parsed image
</span></span><span class=line><span class=cl> ✔ Cataloged packages      [69 packages]
</span></span><span class=line><span class=cl>sbom_alpine
</span></span><span class=line><span class=cl> ✔ Loaded image
</span></span><span class=line><span class=cl> ✔ Parsed image
</span></span><span class=line><span class=cl> ✔ Cataloged packages      [71 packages]
</span></span></code></pre></div><p>And it&rsquo;ll create a directory with organised json files</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl># tree generated_sboms/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>generated_sboms/
</span></span><span class=line><span class=cl>├── sbom_alpine
</span></span><span class=line><span class=cl>│   ├── cyclonedx.json
</span></span><span class=line><span class=cl>│   ├── github.json
</span></span><span class=line><span class=cl>│   ├── spdx.json
</span></span><span class=line><span class=cl>│   └── syft.json
</span></span><span class=line><span class=cl>├── sbom_distroless
</span></span><span class=line><span class=cl>│   ├── cyclonedx.json
</span></span><span class=line><span class=cl>│   ├── github.json
</span></span><span class=line><span class=cl>│   ├── spdx.json
</span></span><span class=line><span class=cl>│   └── syft.json
</span></span><span class=line><span class=cl>└── sbom_ubuntu
</span></span><span class=line><span class=cl>    ├── cyclonedx.json
</span></span><span class=line><span class=cl>    ├── github.json
</span></span><span class=line><span class=cl>    ├── spdx.json
</span></span><span class=line><span class=cl>    └── syft.json
</span></span></code></pre></div><p>Now we have our sbom files and we can share these files to other people who need it. It can be our customers, external auditors, Incident response team, etc etc&mldr; Also we can use these files with another tool that can check these images for vulnerabilities. One such tool is <a href=https://github.com/anchore/grype><strong>grype</strong></a> - A vulnerability scanner for container images and filesystems that works exceptionally with Syft. Below script will generate grype results for all the 3 images using their respective <code>spdx.json</code> files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p grype_results<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> i in sbom_<span class=o>{</span>ubuntu,distroless,alpine<span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>mkdir -p grype_results/<span class=nv>$i</span>
</span></span><span class=line><span class=cl>grype sbom:./generated_sboms/sbom_ubuntu/spdx.json <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-o json <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--file grype_results/<span class=nv>$i</span>/all.json
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>Like all static analysers, this tool might generate tons of false positives. Apart from this, grype tool provides tons of configuration features that can come in handy for automations and several other usecases. A lot of other commercial and open-source tools are arising that can leverage SBOMs and can help to solve problems around licencing and policy compliene, security audits, quality assurance, etc.</p><h3 id=sbom-misconception>SBOM misconception<a hidden class=anchor aria-hidden=true href=#sbom-misconception>#</a></h3><p>There are few misconeptions or myths about SBOMs like it can :-</p><ol><li>be a roadmap to the attacker ?</li><li>require source code disclosure ?</li><li>expose my intellectual properties ? .. etc</li></ol><p><a href=https://www.ntia.gov/files/ntia/publications/sbom_myths_vs_facts_nov2021.pdf>Here is a NTIA publication</a> that covers explaination of some such myths V/S facts.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ayedaemon.github.io/tags/sbom/>sbom</a></li><li><a href=https://ayedaemon.github.io/tags/docker/>docker</a></li><li><a href=https://ayedaemon.github.io/tags/security/>Security</a></li></ul><nav class=paginav><a class=prev href=https://ayedaemon.github.io/post/2022/06/eudyptula-task-2/><span class=title>« Next</span><br><span>Eudyptula Task2</span>
</a><a class=next href=https://ayedaemon.github.io/post/2022/05/eudyptula-task-1/><span class=title>Prev »</span><br><span>Eudyptula Task1</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://ayedaemon.github.io/>Connected</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>