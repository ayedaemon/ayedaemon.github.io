<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>git on Connected</title>
    <link>https://ayedaemon.github.io/tags/git/</link>
    <description>Recent content in git on Connected</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 25 Feb 2021 23:07:04 +0530</lastBuildDate><atom:link href="https://ayedaemon.github.io/tags/git/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Git Form Inside Out</title>
      <link>https://ayedaemon.github.io/post/2021/02/git-form-inside-out/</link>
      <pubDate>Thu, 25 Feb 2021 23:07:04 +0530</pubDate>
      
      <guid>https://ayedaemon.github.io/post/2021/02/git-form-inside-out/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;Inside out approach to learn git&lt;/p&gt;
&lt;/blockquote&gt;</description>
      <content:encoded><![CDATA[<blockquote>
<p>Inside out approach to learn git</p>
</blockquote>
<p>Git is one of the most common version control system used today. And the fact that it was developed by the kernel developers justifies that it is very complex and have a very bad interface. And most of the commands don&rsquo;t make much of a sense at first.</p>
<p><img loading="lazy" src="https://imgs.xkcd.com/comics/git.png" alt=""  />
</p>
<p>But behind the scenes git uses a bunch of tricks in different combinations to make everything work. And once you understand them all the git commands start making much more sense than ever. For this we need to understand the git internals. <em>(There is a lot to the git internals but we are just going to cover a few of them)</em></p>
<h3 id="understanding-git-internals">Understanding git internals</h3>
<p>To understand this, we first need to create a git repository and start working on it. For that, I have created a simple folder <code>play-git</code> here to start playing around. This is usually referred as <code>working area</code> or <code>working repository</code> or <code>working directory</code>.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*hBRrNP1jOnwfwD9KFZmjCw.png" alt="4166af8b1ac5d1751e0db7b971fe091f.png"  />
</p>
<p>Next step after this will be creating/initializing a git repository. This can be done using <code>git init</code> command in the <code>working directory</code>.</p>
<p>[ OUTPUT ]:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Initialized empty Git repository in /home/ayedaemon/extra/playground/play-git/.git/
</span></span></code></pre></div><p>This will create a <code>.git</code> folder in my working repo as indicated by the output of <code>git init</code> command (above).</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*vQK4HULRUlQaa_x_kVQYvw.png" alt="adb3f2fb0a40e1c709355decfdaa7e1a.png"  />
</p>
<p>This <code>.git</code> folder is generally called <code>git repository</code>. This is the place where all of the git magic resides. All your configuration files, repo description, commit histories, information about branches, and other git related things are present here in this directory.</p>
<p>You can think of git as a filesystem. You add, delete, modify, tag, etc..to this filesystem and there are mainly 4 types of objects involved in the whole process - <em>blob, tree, commit, annotated tags</em>. (<a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">Read more about git objects</a>)</p>
<p>This gives us idea that we need to monitor <code>.git</code> repository for changes after we run each command and understand the relation between those.</p>
<p>After <code>git init</code> this is the state of my repository. This is the initial state. So <code>git init</code> basically creates an initial state of this repository in the working area.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*nbo7hioiW-1twtxKNyWUjg.png" alt="46f0b8890ee7112a046493d085e62694.png"  />
</p>
<p>As it can be seen there are multiple <code>hooks</code> setting.. But they are just samples as of now. We can create our own hooks as per the need. These are simple scripts used to perform some automated tasks on some specific actions. (<a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Read more about hooks</a>)</p>
<p>Most important thing is the <code>HEAD</code>. This is a file which is like a pointer to the commit we are pointing. Mostly all the changes we make are made using <code>HEAD</code> somehow.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*757INPmSPjkt5p8CpCDWrA.png" alt="4a586c0fdc56eba09ea2e151b62de01a.png"  />
</p>
<p><code>HEAD</code> points to master for now. We&rsquo;ll look how this file changes it&rsquo;s data with different commands we enter.</p>
<p>Let&rsquo;s add a file and look for changes in the <code>.git</code> folder for each step.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*Nclw6LsPkoMTnfsbAnF8aA.png" alt="82bc5eede0aca16e10f4a7494331f1f9.png"  />
</p>
<p>Looks like there are no changes for simply creating a file and adding some data to it. But things change as soon as I <code>git add .</code> it. So git starts monitoring the changes as soon as I <code>add</code> the files using <code>git add</code> command.</p>
<p>On investigating it further, we can understand that <code>git add</code> has created a <code>blob</code> object under <code>./.git/objects/</code> folder. And the file is <code>zlib</code> compressed data&hellip; so we can uncompress it and look at the content of that file easily using <code>zlib-flate -uncompress</code> command.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*_A1GdQ4liMxcynp8iAhMQQ.png" alt="2a151d08b32a5aa85e8015b67530ef00.png"  />
</p>
<p>On adding a new content to the same file <code>newfile.txt</code>, git created a new blob object. Apparently, git does not store the diffs of the file, instead they store the complete object. So if you have 3 files with a single line of change in each of them, then git is going to store 3 different blobs, instead of storing a diff of the files.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*PoPBHycoASpWcmQprGZqBw.png" alt="50e899981ba30ee293b0ce3e5eae3645.png"  />
</p>
<p>You can also notice that here as the previous data is not yet gone from the git repository. We have both of our changes - old and new.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*xjLAb764GY4OYi3VCb-USw.png" alt="7340555ef8a6a4d0902818496ee5b378.png"  />
</p>
<p>Let&rsquo;s switch back again to the first data we have entered in the file.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*uOo5vQP3twWEdSnoDPMuGQ.png" alt="70732c4b40f878b4d77699be94953a83.png"  />
</p>
<p>This time they have not created any new object.. This means they create a new blob object whenever there is a new data.. and use the previous blob object whenever possible.</p>
<p>Now let&rsquo;s see what changes do we get on commiting these blob objects.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*DFr0bopyWUazFco2IMTNRw.png" alt="009e82b5393da52308aed11ed3038970.png"  />
</p>
<p>On commiting there are 2 more objects and some logs. Let&rsquo;s inspect each one to see if we can get anything out of it.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*1Bm6prZqcZ3mJ4TALFDmjg.png" alt="c9a9a7ee7ae4dcc06a275fc1fa5ce302.png"  />
</p>
<p>One of the object is <code>tree</code> object and another one is the <code>commit</code> object. <code>Commit</code> object has all the information about the blob we added and the commit message along with few other details.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*s-1m7MmZibfId2T57UT1zQ.png" alt="3aa20774d7dd8243d93d85100dcca0bb.png"  />
</p>
<p>The other 2 logs which were generated are as above. By looking at these we can get that they both point to the commit object for now.</p>
<p>And if we look at the <code>.git/HEAD</code> file, it still points to this reference - <code>ref: refs/heads/master</code>. Further looking in <code>.git/refs/heads/master</code> file, we get that this points to the commit object we created.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*g6Tmt0Ye63GSIo92f44Q5A.png" alt="68cacb0fc7051e7605d1500d4dbdc042.png"  />
</p>
<p>If we are to visualize the current situation it&rsquo;ll be something like this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    HEAD
</span></span><span class="line"><span class="cl">      +---------+
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                v
</span></span><span class="line"><span class="cl">            master +----------+
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              v
</span></span><span class="line"><span class="cl">                    +---------+--------+
</span></span><span class="line"><span class="cl">                    |                  |
</span></span><span class="line"><span class="cl">                    |    ed6108f       |
</span></span><span class="line"><span class="cl">                    |                  |
</span></span><span class="line"><span class="cl">                    +------------------+
</span></span></code></pre></div><p>Let&rsquo;s add more commits to it now.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*I2RizOVqQNubcH9WCoSz6Q.png" alt="cbdf135114c2841bff7a548a257b0be4.png"  />
</p>
<p>We now have 2 new objects for 2 new files.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*hJlUrb_VRcA-xCwWZdLhkw.png" alt="f09ff43bce929443cb27c8608bbc316a.png"  />
</p>
<p>But if we add another file with the same content in it (In other words, if use the repeatative data) then, git will not create new <code>blob</code> objects for it. It&rsquo;ll use the previous blob object to track it.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*emRU-KuEU7GchUWdMDGaWQ.png" alt="fe3bbef0a4e866cfeb78eb34787c2cd1.png"  />
</p>
<p>This means that git only tracks the data in the file along with the file name&hellip; instead of directly tracking the files.</p>
<p>Let&rsquo;s check the logs now.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*74DdNgDolpjCe6q59RvAyg.png" alt="dfb9e64baa638695203e6e3703b7d09c.png"  />
</p>
<p>And we can get the same data from the <code>.git/logs/HEAD</code> file.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*vhGSziEggSkqETtVhtrPmw.png" alt="c1e284ae4b72cf31682fe33f1789c72b.png"  />
</p>
<p>Again checking on the <code>.git/HEAD</code></p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*kVSAsLYHDYGn9TfPLYGCpA.png" alt="6be26d0862e1d91c65932568f0d00252.png"  />
</p>
<p>Visual diagram for the above will look something like this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">     HEAD
</span></span><span class="line"><span class="cl">      +---------+
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                |
</span></span><span class="line"><span class="cl">                v
</span></span><span class="line"><span class="cl">            master +----------+
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              v
</span></span><span class="line"><span class="cl">                        +------------------+              +--------+-------+
</span></span><span class="line"><span class="cl">                        |                  |              |                |
</span></span><span class="line"><span class="cl">                        |    20998091      +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                        |                  |              |                |
</span></span><span class="line"><span class="cl">                        +------------------+              +----------------+
</span></span></code></pre></div><p>You can also check this from the screenshot below.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*vbLTth8rJXui9kGYU0ZV5Q.png" alt="7f17fb655b855a4d6e8bf4b4e72c859f.png"  />
</p>
<p>Let&rsquo;s go branching now. You can create a new branch using <code>git checkout -b feature</code>. This command will create a branch for you. We can also observe that there are 2 new files.. 1 in the <code>logs</code> and another one in the <code>refs/heads</code>.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*ppcavYaD0ELH2yK6aA3pmw.png" alt="503f551455369c3e6381b048cebfd995.png"  />
</p>
<p>Let&rsquo;s see what&rsquo;s there in these files.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*L0sCOP5rzLfvcXBpj9NxDQ.png" alt="cbe4568f597d1f155b8115afb2fa706c.png"  />
</p>
<p>We can observe 2 interesting things here:</p>
<ol>
<li><code>feature</code> and <code>master</code> branch point to the same commit at the moment.</li>
<li><code>.git/HEAD</code> (HEAD) points to the <code>feature</code> branch. This means whatever changes we will make it&rsquo;ll be made on the <code>feature</code> branch.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">            master +----------+
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              v
</span></span><span class="line"><span class="cl">                        +------------------+              +--------+-------+
</span></span><span class="line"><span class="cl">                        |                  |              |                |
</span></span><span class="line"><span class="cl">                        |    20998091      +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                        |                  |              |                |
</span></span><span class="line"><span class="cl">                        +------------------+              +----------------+
</span></span><span class="line"><span class="cl"> HEAD                              ^
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  +---------&gt;  feature +-----------+                    
</span></span></code></pre></div><p>Let&rsquo;s add new commits and see if we can see what we just concluded.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*XInKAYXdX0fYXhdx_-MNEg.png" alt="5ef13d9b8a5bc1ad9405e0a674ddd7b4.png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">                                            master +--------+
</span></span><span class="line"><span class="cl">                                                            |
</span></span><span class="line"><span class="cl">                                                            |
</span></span><span class="line"><span class="cl">                                                            |
</span></span><span class="line"><span class="cl">                                                            v
</span></span><span class="line"><span class="cl">                        +----------------+           +-------+----------+              +----------------+
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        |  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        +----------------+           +------------------+              +---------+------+
</span></span><span class="line"><span class="cl"> HEAD                              ^
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  |                                |
</span></span><span class="line"><span class="cl">  +---------&gt;  feature +-----------+                    
</span></span></code></pre></div><p>At this point, the <code>master</code> is direct parent to the <code>feature</code> branch. So if we just merge <code>feature</code> to <code>master</code> then it&rsquo;ll simply move the label one commit ahead. There is no need for a new commit to add both the changes.</p>
<p>For this, we need to change back to the master branch. Behind the scenes, this will simply change the <code>.git/HEAD</code> reference to <code>master</code> from <code>feature</code>.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*lI79Jo8v8bvdW4MumLCh9g.png" alt="23a94720384d5ba47175ef036e8b53e7.png"  />
</p>
<p>And visually, it&rsquo;ll look something like this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">                              HEAD
</span></span><span class="line"><span class="cl">                                    +---------+
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                |  
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                v
</span></span><span class="line"><span class="cl">                                              master +--------+
</span></span><span class="line"><span class="cl">                                                              |
</span></span><span class="line"><span class="cl">                                                              |
</span></span><span class="line"><span class="cl">                                                              |
</span></span><span class="line"><span class="cl">                                                              v
</span></span><span class="line"><span class="cl">                        +----------------+           +-------+----------+              +----------------+
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        |  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        +----------------+           +------------------+              +---------+------+
</span></span><span class="line"><span class="cl">                                   ^
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">               feature +-----------+    
</span></span></code></pre></div><p>We can see that there are some changes in the <code>feature</code> branch that <code>master</code> branch does not have yet. We can merge <code>feature</code> branch to <code>master</code> branch to get these features in the <code>master</code>.</p>
<p>To merge, we need to switch to master branch, and then simply merge it.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*Yd6L72qzwOmpxI1_BQqlAQ.png" alt="47dda33a7e15a0152c7316dd65624f2a.png"  />
</p>
<p>This type of merge is called <code>fast-forward</code> merge (as given in the output). This is simply moving forward and shifting the label (<code>master</code>) to point to appropriate commit.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    HEAD
</span></span><span class="line"><span class="cl">        +---------+
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |  
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    v
</span></span><span class="line"><span class="cl">                    master +--------+
</span></span><span class="line"><span class="cl">                                    |
</span></span><span class="line"><span class="cl">                                    |
</span></span><span class="line"><span class="cl">                                    |
</span></span><span class="line"><span class="cl">                                    v
</span></span><span class="line"><span class="cl">                        +----------------+           +-------+----------+              +----------------+
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        |  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                        |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                        +----------------+           +------------------+              +---------+------+
</span></span><span class="line"><span class="cl">                                   ^
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">                                   |
</span></span><span class="line"><span class="cl">               feature +-----------+
</span></span></code></pre></div><p>Let&rsquo;s make more changes to <code>feature</code> and <code>master</code> both. And then merge them.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*5Y6skgMMb_rvh0L1A1dJtA.png" alt="89af308b8586ed845882a9b37afabbd9.png"  />
</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*NdS8odkqsUX6I0tkULNU3Q.png" alt="6efd02ef2eeddea7e22247c59d19bc3f.png"  />
</p>
<p>Looking the logs in <code>feature</code> branch, we get -</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*nMoG2TMeKji6cHe5v8tfSw.png" alt="8ebabbb22d1cf081a0b208a5b10d5f01.png"  />
</p>
<p>And for <code>master</code> branch -</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*s7R8lIYHci4BfnUHQUBH_w.png" alt="53f63b918e79fc7eb5f92411893378e0.png"  />
</p>
<p>We can clearly see that both have all the commits same except the latest one. And since both the branches had their different log files they have separate logs. But we can use a pretty handy command to check both the logs combined and a graphical representation (sort of) for both.</p>
<p><code>git log --graph --decorate --all</code></p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*LQQhmQOszVpyv2-7VKeGMg.png" alt="2734b5233469d2083bff6480e05f873a.png"  />
</p>
<p>Since I am in my main branch right now, so the <code>HEAD</code> points to <code>master</code>.</p>
<p>This situation will look something like this diagram below.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">HEAD
</span></span><span class="line"><span class="cl">    +---------+
</span></span><span class="line"><span class="cl">              |
</span></span><span class="line"><span class="cl">              |
</span></span><span class="line"><span class="cl">              v
</span></span><span class="line"><span class="cl">              master +--------+
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              |
</span></span><span class="line"><span class="cl">                              v
</span></span><span class="line"><span class="cl">                      +-------+-------+      +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                      |               |      |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                      |   633145f     +&lt;--+--+  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                      |               |   |  |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                      +---------------+   |  +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                                          |
</span></span><span class="line"><span class="cl">                                          |
</span></span><span class="line"><span class="cl">                                          |
</span></span><span class="line"><span class="cl">                                          |
</span></span><span class="line"><span class="cl">                     +----------------+   |
</span></span><span class="line"><span class="cl">                     |                |   |
</span></span><span class="line"><span class="cl">                     |  68d38e06      +&lt;--+
</span></span><span class="line"><span class="cl">                     |                |
</span></span><span class="line"><span class="cl">                     +-------+--------+
</span></span><span class="line"><span class="cl">                             ^
</span></span><span class="line"><span class="cl">                             |
</span></span><span class="line"><span class="cl">                             |
</span></span><span class="line"><span class="cl">         feature +-----------+
</span></span></code></pre></div><p>let&rsquo;s see what happens when we merge these 2 branches now.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*S5b5pJGsxqKgU0i_I89fIg.png" alt="b1983eee80e14c1595471d2c2b3ec4ee.png"  />
</p>
<p>This time it creates a new commit to merge both the branches and moves label <code>master</code> ahead to that commit, along with the <code>HEAD</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">HEAD
</span></span><span class="line"><span class="cl">  +---------+
</span></span><span class="line"><span class="cl">            |
</span></span><span class="line"><span class="cl">            |
</span></span><span class="line"><span class="cl">            v
</span></span><span class="line"><span class="cl">          master +--+
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    |
</span></span><span class="line"><span class="cl">                    v
</span></span><span class="line"><span class="cl">            +-------+---------+         +---------------+      +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">            |                 |         |               |      |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">            |  76b2abc        +&lt;--------+   633145f     +&lt;--+--+  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">            |                 |         |               |   |  |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">            +-------+---------+         +---------------+   |  +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                    ^                                       |
</span></span><span class="line"><span class="cl">                    |                                       |
</span></span><span class="line"><span class="cl">                    |                                       |
</span></span><span class="line"><span class="cl">                    |                                       |
</span></span><span class="line"><span class="cl">                    |                  +----------------+   |
</span></span><span class="line"><span class="cl">                    |                  |                |   |
</span></span><span class="line"><span class="cl">                    +------------------+  68d38e06      +&lt;--+
</span></span><span class="line"><span class="cl">                                       |                |
</span></span><span class="line"><span class="cl">                                       +--------+-------+
</span></span><span class="line"><span class="cl">                                                ^
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                                                |
</span></span><span class="line"><span class="cl">                            feature +-----------+
</span></span></code></pre></div><p>In this merge, <code>master</code> calculated that it is not in the same hierarchy as <code>feature</code>. So it created a new object, merged the data from the feature and commited it as any other object.</p>
<p>After merging, <code>master</code> and <code>head</code> labels will move forward to the latest commit. But the <code>feature</code> will be the same as before&hellip; as we have not changed anything in that yet.</p>
<p>What if that this new commit <code>76b2abc</code> was a mistake and we want our <code>master</code> and <code>HEAD</code> labels back to commit <code>633145f</code>?</p>
<p>We can simply reset the commits by <code>git reset 633145</code> command. This will move my labels back to this commit mentioned.</p>
<p>Interestingly enough, this will not remove the commit <code>76b2abc</code> from the <code>.git/objects/</code> directory. It&rsquo;ll simply write a new log in the logs file and <code>git log --graph --decorate --all</code> command will give you a good output back.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*08ueelzQ8hCciCTFnObOXg.png" alt="9584163f6f8878fd479038b5bae49d53.png"  />
</p>
<p><strong>What if we want to test the new feature with all the current updates of master?</strong></p>
<p>For this, we need to go to <code>feature</code> branch and merge <code>master</code> to it using <code>git merge master</code></p>
<p><em>(I had to remove <code>newfile7.txt</code> from <code>master</code> branch in order to switch the branch as there were few changes untracked. There are other ways around this as well, but to keep things simple I just deleted it)</em></p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*pLucA0coDh_U9fddlJXONg.png" alt="9d399a607e2c967a20bd135c2f73f4f1.png"  />
</p>
<p>This is again <strong>recursive strategy</strong> merge.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">                                              master +--+
</span></span><span class="line"><span class="cl">                                                        |
</span></span><span class="line"><span class="cl">                                                        |
</span></span><span class="line"><span class="cl">                                                        |
</span></span><span class="line"><span class="cl">                                                        v
</span></span><span class="line"><span class="cl">                                               +--------+------+      +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                                               |               |      |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                           +-------------------+   633145f     +&lt;--+--+  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">                           |                   |               |   |  |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                           |                   +---------------+   |  +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                           |                                       |
</span></span><span class="line"><span class="cl">                           |                                       |
</span></span><span class="line"><span class="cl">                           |                                       |
</span></span><span class="line"><span class="cl">                           |                                       |
</span></span><span class="line"><span class="cl">                  +--------v--------+         +----------------+   |
</span></span><span class="line"><span class="cl">                  |                 |         |                |   |
</span></span><span class="line"><span class="cl">                  |    88dd609c     +&lt;--------+  68d38e06      +&lt;--+
</span></span><span class="line"><span class="cl">                  |                 |         |                |
</span></span><span class="line"><span class="cl">                  +--------+--------+         +----------------+
</span></span><span class="line"><span class="cl">                           ^
</span></span><span class="line"><span class="cl">                           |
</span></span><span class="line"><span class="cl">                           |
</span></span><span class="line"><span class="cl">    +-----&gt; feature +------+
</span></span><span class="line"><span class="cl">    |
</span></span><span class="line"><span class="cl">    |
</span></span><span class="line"><span class="cl">HEAD+
</span></span></code></pre></div><p>This way there was no change made in the <code>master</code> and a new <code>feature</code> was added and can be tested properly. You can call this <code>feature integration test</code>. If the feature passes the tests and we decide to update <code>master</code> with this feature, we can simply switch to <code>master</code> branch and merge <code>feature</code> to it.</p>
<p>After checking out to <code>master</code> using <code>git checkout master</code> command, <code>HEAD</code> points to <code>master</code> like in the screenshot below.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*BNZEHTYipmrr07qggYpuxw.png" alt="57556ceaeef66bd42d848dbcee4ba250.png"  />
</p>
<p>On merging, we get a <code>fast-forward</code> merge since the <code>master</code> is direct parent of the commit which is to be merged and there was no need of a new commit to be created.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*Wr8uyhO-Z4ZaOIQTONgL1A.png" alt="07a8c21c8d877800f8133fda85649cc6.png"  />
</p>
<p>After merge, <code>master</code>, <code>HEAD</code>, and <code>feature</code> point to the same commit.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*DwuBaYNqhryqOIaTKQhvXg.png" alt="f3a0e106a715bfc7c9fb29294c2be6ae.png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">                                                +---------------+      +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">                                                |               |      |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">                                   +------------+   633145f     +&lt;--+--+  748ffe6       +&lt;----------+   20998091       +&lt;-------------+   ed6108f      |
</span></span><span class="line"><span class="cl">    +-----&gt; master +--+            |            |               |   |  |                |           |                  |              |                |
</span></span><span class="line"><span class="cl">    |                 |            |            +---------------+   |  +----------------+           +------------------+              +----------------+
</span></span><span class="line"><span class="cl">    |                 |            |                                |
</span></span><span class="line"><span class="cl">HEAD+                 |            |                                |
</span></span><span class="line"><span class="cl">                      v            |                                |
</span></span><span class="line"><span class="cl">                   +--+------------v-+                              |
</span></span><span class="line"><span class="cl">                   |                 |         +----------------+   |
</span></span><span class="line"><span class="cl">                   |                 |         |                |   |
</span></span><span class="line"><span class="cl">                   |    88dd609c     +&lt;--------+  68d38e06      +&lt;--+
</span></span><span class="line"><span class="cl">                   |                 |         |                |
</span></span><span class="line"><span class="cl">                   +--------+--------+         +----------------+
</span></span><span class="line"><span class="cl">                            ^
</span></span><span class="line"><span class="cl">                            |
</span></span><span class="line"><span class="cl">                            |
</span></span><span class="line"><span class="cl">             feature +------+
</span></span></code></pre></div><h3 id="collaborating-with-git">Collaborating with git</h3>
<p>Usually we don&rsquo;t use git standalone in our machine. What I mean is, we do use git locally most of the time but at some point we need to share our commits to someone else via network.</p>
<p>To cover up the whole picture in a line &ndash;&gt;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">To **get commits** from someone else we need to do `git pull`... and to **send our commits** out on the internet we need to `git push`.
</span></span></code></pre></div><p>I am going the way we usually go and do things - &ldquo;start with cloning a repo&rdquo;. After cloning a repo I have got this.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*OAjmAcpPHS3lh__6a8eG4A.png" alt="3136b34c3d1fb691978ba27ba7fe040c.png"  />
</p>
<p>Let&rsquo;s inspect it.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*CCgmt9_00ZtzwhgGrcy8fw.png" alt="181dada91166befe05f1027229e9926e.png"  />
</p>
<p>This time there are no obects like the last time. But we have new kinds of files - <code>pack</code> and <code>idx</code>. Git creates <code>pack</code> file(s) by reading a list of git objects and then convert this <code>pack</code> file to <code>idx</code> (index) file. This can be used by git to know the information about the <code>git objects</code> used to create <code>pack</code> file. But this is not important at the point.</p>
<p>The point I wanted to get started with is <strong>remotes</strong>. There is a new reference in <code>.git/refs/</code> directory that points to something called <code>remotes/origin/HEAD</code>.</p>
<p><strong>So what the heck is <code>origin</code> anyway? Why should I care?</strong></p>
<p>If you go out and check the <code>.git/config</code> file&hellip;you will know what origin means.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*uLZxtZhKrfRCqb6GCqprCA.png" alt="698de5dd7d0f76d92fda7600133deff3.png"  />
</p>
<p>Here <code>origin</code> is just a name that points to the github repo from which I cloned my current repository. So yeah, you should care about it if you have any intensions to push/pull to this remote repository anytime in future.</p>
<p>Any branch with syntax like <code>refs/remotes/*/*</code> is called <strong>remote tracking branch</strong>. As the name suggests, it helps in tracking the remote status. It always show the remote status according to the last time both were synced together..and then they stay where ever they are until they are synced again.</p>
<p>So from all this, we can see that there is no exact need for <code>origin</code> or simply <code>remote</code> to be on the internet or in the network all the time. They both just need to be in contact whenever these needs to be synced. After that&rsquo;s the whole point of being a distributed system.</p>
<p>What we need is a <code>remote</code> repository..that can give us the pack files&hellip;and other objects&hellip; and then a <code>working</code> directory that we can use to add our changes and maybe another working directory that someone else is using to make his changes.</p>
<p>Workflow I am going to use now is as follows:-</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">                  start project
</span></span><span class="line"><span class="cl">                       +
</span></span><span class="line"><span class="cl">                       |
</span></span><span class="line"><span class="cl">                       v
</span></span><span class="line"><span class="cl">                   add new file
</span></span><span class="line"><span class="cl">       +------------+      +-----------+
</span></span><span class="line"><span class="cl">       |                               |
</span></span><span class="line"><span class="cl">       v                               v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">make a feature                 fix some old bugs
</span></span><span class="line"><span class="cl">      +                            		 +
</span></span><span class="line"><span class="cl">      |                             	 |
</span></span><span class="line"><span class="cl">      |                              	 |
</span></span><span class="line"><span class="cl">      |                             	 |
</span></span><span class="line"><span class="cl">      |                             	 |
</span></span><span class="line"><span class="cl">      v                             	 |
</span></span><span class="line"><span class="cl">                                    	 |
</span></span><span class="line"><span class="cl">  integrate and test new feature  &lt;------+
</span></span><span class="line"><span class="cl">         +
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         |
</span></span><span class="line"><span class="cl">         +---------&gt; (Push now)
</span></span></code></pre></div><p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*awN0OcR6ChWNGImDu5NQzg.png" alt="0c57e1dc0af1138ed7eece4e94aca6e6.png"  />
</p>
<p>After integrating <code>master</code> to our <code>feature</code> we have:-</p>
<ul>
<li>a <code>feature</code> branch with new feature and base from <code>master</code>.</li>
<li>and <code>master</code> which is not changed.</li>
</ul>
<p>So if we want we can always use the previous stable version <code>master</code> or the bleeding edge <code>feature</code>.</p>
<p>Now time to push it&hellip; But instead of actually pushing it, I&rsquo;ll make a local bare clone that is exactly same as the repo handled by github or similar after you make a push.</p>
<p>To make a bare clone of the repo you can use <code>--bare</code> option and rest is same.</p>
<p>Command:- <code>git clone --bare mywork remote_repo</code></p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*skK2pYPZ_vXQVRDUDW1Fzg.png" alt="0cf881166a102a8aa84db52c613f020f.png"  />
</p>
<p>Now I have 2 repos&hellip; And the <code>remote_repo</code> has the content of <code>.git</code> folder&hellip; It does not have any tracking branches this time. Well, we don&rsquo;t need tracking branches in this repo. Do we?</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*DoDgTjon2rAG6qheeU_K3Q.png" alt="3986910788e8cbf223fdcbcae8f6f761.png"  />
</p>
<p>Also I can see that all the commits I made are present there in the <code>remote_repo</code>.</p>
<p>Let&rsquo;s say now someone clones this repo&hellip;</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*O039qFVURwsVx7BsafKgjg.png" alt="e8da0bce0f78d071e31b92bfb61f7d2e.png"  />
</p>
<p>He also gets all the commits from the remote repo</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*_1uhCzyMGxUsFRXKs4QPXg.png" alt="17a69641d9e36ecd14bd726b471200af.png"  />
</p>
<p>With my <code>remote_repo</code> as the <code>origin</code>.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*YkdMCeLFjOCo6YLdQA-QUQ.png" alt="cca341285a51caf580664998bfccc2b3.png"  />
</p>
<p>Because <code>origin</code> can be any bare repository.</p>
<p>After someone has added their own branch and commited that change to his repo. Now he is ready to push/share the changes to/with origin.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*s6nAQgt2fhjaGqk04X047g.png" alt="a8a8d0aa33f7a36f7a458033031dbfe4.png"  />
</p>
<p>He can share the data simply using the <code>push</code> command.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*hys3WwsBfL2X5MFarjJfBQ.png" alt="4ec7a1e0d63e4c04b301713c4edd24ca.png"  />
</p>
<p>Now our origin has got that new branch. So I had made changes to <code>master</code> branch it would have reflected in the master branch of the <code>origin</code>.</p>
<p>After running below commands, <code>someone</code> can switch to his <code>master</code> branch and merge his <code>user_feature</code> branch.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git checkout master
</span></span><span class="line"><span class="cl">git merge user_feature
</span></span></code></pre></div><p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*u2nxwq7h6iqoH90HDX81sQ.png" alt="1d5c65d132d775240cd239b78e89d1ab.png"  />
</p>
<p><code>master</code> has now got all the new commits. Time to push/share master to our origin.</p>
<p><img loading="lazy" src="https://cdn-images-1.medium.com/proxy/1*ylZQEbguGwLgPLGWeqpyRA.png" alt="9c97cab32e0355e39989991912c21ad4.png"  />
</p>
<p>After pushing changes to <code>origin</code> all the commits made to <code>master</code> are shared with <code>origin/master</code> and now both of them point to a single commit.</p>
<p>I can also <code>pull</code> the changes from <code>remote_repo</code> to <code>mywork</code>&hellip; the only thing I have to do is set a <code>remote</code> that points to the repo I want to pull data from.</p>
<p>Or for now I can simply specify from where to pull and merge where.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git pull ./../remote_repo/ master
</span></span></code></pre></div><p>This will give me the latest commits made by <em>someone</em> and pushed to remote.</p>
<h3 id="conclusion">Conclusion</h3>
<p>This is how a typical git flow works. There are obviously other git flows better and complex than this but knowing this flow gives you a basic idea of how to make your way around git and use it effectively to manage your project.</p>
<p><strong>Where to go from here??</strong>
You should start playing on your own exploring more commands and looking up their <code>help pages</code> for descriptions and other information. I&rsquo;ll recommend to read the <a href="https://git-scm.com/book/en/v2"><code>Pro Git</code> Book</a> to understand other concepts as well. It is available for free.</p>]]></content:encoded>
    </item>
    
  </channel>
</rss>
